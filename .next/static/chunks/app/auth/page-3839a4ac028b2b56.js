(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[365],{9631:(e,t,r)=>{Promise.resolve().then(r.bind(r,6898))},7594:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(2800).A)("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]])},8686:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(2800).A)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},6046:(e,t,r)=>{"use strict";var a=r(6658);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},9125:(e,t,r)=>{"use strict";var a=r(2115),n="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},s=a.useState,o=a.useEffect,i=a.useLayoutEffect,l=a.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!n(e,r)}catch(e){return!0}}var u="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),a=s({inst:{value:r,getSnapshot:t}}),n=a[0].inst,u=a[1];return i(function(){n.value=r,n.getSnapshot=t,c(n)&&u({inst:n})},[e,r,t]),o(function(){return c(n)&&u({inst:n}),e(function(){c(n)&&u({inst:n})})},[e]),l(r),r};t.useSyncExternalStore=void 0!==a.useSyncExternalStore?a.useSyncExternalStore:u},6854:(e,t,r)=>{"use strict";var a=r(2115),n=r(4236),s="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=n.useSyncExternalStore,i=a.useRef,l=a.useEffect,c=a.useMemo,u=a.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,r,a,n){var d=i(null);if(null===d.current){var m={hasValue:!1,value:null};d.current=m}else m=d.current;var h=o(e,(d=c(function(){function e(e){if(!l){if(l=!0,o=e,e=a(e),void 0!==n&&m.hasValue){var t=m.value;if(n(t,e))return i=t}return i=e}if(t=i,s(o,e))return t;var r=a(e);return void 0!==n&&n(t,r)?t:(o=e,i=r)}var o,i,l=!1,c=void 0===r?null:r;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,r,a,n]))[0],d[1]);return l(function(){m.hasValue=!0,m.value=h},[h]),u(h),h}},4236:(e,t,r)=>{"use strict";e.exports=r(9125)},8010:(e,t,r)=>{"use strict";e.exports=r(6854)},6898:(e,t,r)=>{"use strict";r.d(t,{AuthForm:()=>g});var a=r(5155),n=r(2115),s=r(6462);let o=(0,r(2800).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var i=r(8686),l=r(7594),c=r(6046),u=r(7867),d=r(1084),m=r(6113),h=r(5398);function f(){let[e,t]=(0,n.useState)(null),r=async()=>{try{t("microsoft"),await (0,h.h)()}catch(e){console.error("Microsoft login error:",e)}finally{t(null)}};return(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("button",{onClick:r,disabled:!!e,className:"w-full flex items-center justify-center gap-3 px-4 py-2.5 bg-[#2F2F2F] text-white rounded-lg hover:bg-[#1F1F1F] transition-colors disabled:opacity-50",children:["microsoft"===e?(0,a.jsx)(l.A,{className:"w-5 h-5 animate-spin"}):(0,a.jsx)(m.u,{className:"w-5 h-5"}),"Continue with Microsoft"]}),(0,a.jsxs)("button",{disabled:!0,className:"w-full flex items-center justify-center gap-3 px-4 py-2.5 bg-gray-100 text-gray-400 rounded-lg cursor-not-allowed",children:[(0,a.jsx)(s.A,{className:"w-5 h-5"}),"Continue with Google (Coming Soon)"]}),(0,a.jsx)("p",{className:"text-xs text-center text-gray-500 mt-4",children:"By continuing, you agree to grant access to your emails for AI processing"})]})}function g(){let e=(0,c.useRouter)(),{signIn:t,signUp:r,error:m,clearError:h}=(0,u.n)(),[g,y]=(0,n.useState)("login"),[x,p]=(0,n.useState)(!1),[v,w]=(0,n.useState)(null),[b,j]=(0,n.useState)({email:"",password:"",confirmPassword:""}),S=async a=>{if(a.preventDefault(),w(null),h(),"register"===g&&b.password!==b.confirmPassword){w("Passwords do not match");return}try{p(!0),"login"===g?await t(b.email,b.password):await r(b.email,b.password),e.push("/")}catch(e){d.v.error("".concat(g," failed:"),e),w("Failed to ".concat(g,". Please try again."))}finally{p(!1)}},N=async()=>{try{d.v.info("Demo login: Starting authentication"),p(!0),w(null),h(),await t("demo@smartemail.demo","demo123456"),d.v.info("Demo login: Successful sign in"),e.push("/")}catch(e){d.v.error("Demo login failed:",e),w("Failed to access demo account. Please try again.")}finally{p(!1)}};return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(s.A,{className:"w-16 h-16 text-primary"})}),(0,a.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Welcome to Smart Email Manager"}),(0,a.jsx)("p",{className:"mt-2 text-center text-sm text-gray-600",children:"login"===g?"Sign in to your account":"Create your account"})]}),(v||m)&&(0,a.jsx)("div",{className:"bg-red-50 text-red-600 p-3 rounded-md text-sm",children:v||m}),(0,a.jsxs)("form",{onSubmit:S,className:"mt-8 space-y-6",children:[(0,a.jsxs)("div",{className:"rounded-md shadow-sm space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)(o,{className:"h-5 w-5 text-gray-400"})}),(0,a.jsx)("input",{id:"email",name:"email",type:"email",required:!0,value:b.email,onChange:e=>j({...b,email:e.target.value}),className:"appearance-none relative block w-full pl-10 px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-primary focus:border-primary sm:text-sm",placeholder:"Email address"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password",className:"sr-only",children:"Password"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)(i.A,{className:"h-5 w-5 text-gray-400"})}),(0,a.jsx)("input",{id:"password",name:"password",type:"password",required:!0,value:b.password,onChange:e=>j({...b,password:e.target.value}),className:"appearance-none relative block w-full pl-10 px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-primary focus:border-primary sm:text-sm",placeholder:"Password"})]})]}),"register"===g&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"confirmPassword",className:"sr-only",children:"Confirm Password"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)(i.A,{className:"h-5 w-5 text-gray-400"})}),(0,a.jsx)("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:b.confirmPassword,onChange:e=>j({...b,confirmPassword:e.target.value}),className:"appearance-none relative block w-full pl-10 px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-primary focus:border-primary sm:text-sm",placeholder:"Confirm password"})]})]})]}),(0,a.jsx)("div",{children:(0,a.jsx)("button",{type:"submit",disabled:x,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary hover:bg-primary-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary transition-colors disabled:opacity-50",children:x?(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(l.A,{className:"w-5 h-5 animate-spin"}),"login"===g?"Signing in...":"Creating account..."]}):"login"===g?"Sign in":"Create account"})})]}),(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,a.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,a.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,a.jsx)("span",{className:"px-2 bg-gray-50 text-gray-500",children:"Or continue with"})})]}),(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsx)(f,{})})]}),(0,a.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,a.jsx)("button",{onClick:N,disabled:x,className:"text-primary hover:text-primary-dark text-sm font-medium",children:"Try Demo Account"}),(0,a.jsx)("button",{onClick:()=>y("login"===g?"register":"login"),className:"text-gray-600 hover:text-gray-900 text-sm",children:"login"===g?"Don't have an account? Sign up":"Already have an account? Sign in"})]})]})})}},6113:(e,t,r)=>{"use strict";r.d(t,{u:()=>n});var a=r(5155);function n(e){let{className:t="w-6 h-6"}=e;return(0,a.jsxs)("svg",{className:t,viewBox:"0 0 23 23",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{fill:"currentColor",d:"M0 0h11v11H0z"}),(0,a.jsx)("path",{fill:"currentColor",d:"M12 0h11v11H12z"}),(0,a.jsx)("path",{fill:"currentColor",d:"M0 12h11v11H0z"}),(0,a.jsx)("path",{fill:"currentColor",d:"M12 12h11v11H12z"})]})}},7867:(e,t,r)=>{"use strict";r.d(t,{n:()=>s});var a=r(3749),n=r(7776);let s=(0,a.vt)(e=>({user:null,isLoading:!0,error:null,setUser:t=>e({user:t}),setIsLoading:t=>e({isLoading:t}),setError:t=>e({error:t}),signIn:async(t,r)=>{try{e({isLoading:!0,error:null});let a=(0,n.U)();if(!a)throw Error("Supabase client not initialized");let{error:s}=await a.auth.signInWithPassword({email:t,password:r});if(s)throw s}catch(t){throw e({error:t instanceof Error?t.message:"Failed to sign in"}),t}finally{e({isLoading:!1})}},signUp:async(t,r)=>{try{e({isLoading:!0,error:null});let a=(0,n.U)();if(!a)throw Error("Supabase client not initialized");let{error:s}=await a.auth.signUp({email:t,password:r,options:{emailRedirectTo:"".concat(window.location.origin,"/auth/callback")}});if(s)throw s}catch(t){throw e({error:t instanceof Error?t.message:"Failed to sign up"}),t}finally{e({isLoading:!1})}},signOut:async()=>{try{e({isLoading:!0,error:null});let t=(0,n.U)();if(!t)throw Error("Supabase client not initialized");let{error:r}=await t.auth.signOut();if(r)throw r;e({user:null})}catch(t){throw e({error:t instanceof Error?t.message:"Failed to sign out"}),t}finally{e({isLoading:!1})}},clearError:()=>e({error:null})})),o=(0,n.U)();o&&o.auth.onAuthStateChange((e,t)=>{var r;s.setState({user:null!==(r=null==t?void 0:t.user)&&void 0!==r?r:null,isLoading:!1})})},5398:(e,t,r)=>{"use strict";r.d(t,{h:()=>n});var a=r(7776);async function n(){let e=(0,a.U)();if(!e)throw Error("Failed to initialize Supabase client");return e.auth.signInWithOAuth({provider:"azure",options:{scopes:"email offline_access Mail.Read Mail.Send User.Read",redirectTo:"".concat(window.location.origin,"/auth/callback"),skipBrowserRedirect:!0}}).then(e=>{let{data:t,error:r}=e;if(r)throw r;if(!(null==t?void 0:t.url))throw Error("No OAuth URL returned");let a=window.open(t.url,"microsoft-oauth","width=600,height=800,left=200,top=100");return new Promise((e,r)=>{let n=setInterval(()=>{try{var s;(null==a?void 0:a.closed)&&(clearInterval(n),r(Error("Authentication cancelled"))),(null==a?void 0:null===(s=a.location)||void 0===s?void 0:s.hostname)===window.location.hostname&&(clearInterval(n),a.close(),e(t))}catch(e){(null==a?void 0:a.closed)&&(clearInterval(n),r(Error("Authentication cancelled")))}},500);setTimeout(()=>{clearInterval(n),null==a||a.close(),r(Error("Authentication timeout"))},3e5)})})}},1084:(e,t,r)=>{"use strict";r.d(t,{v:()=>n});class a{logToConsole(e){let t="[".concat(e.timestamp,"] [").concat(e.level.toUpperCase(),"]");switch(e.level){case"debug":e.data?console.log(t,e.message,e.data):console.log(t,e.message);break;case"info":e.data?console.info(t,e.message,e.data):console.info(t,e.message);break;case"warn":e.data?console.warn(t,e.message,e.data):console.warn(t,e.message);break;case"error":e.data?console.error(t,e.message,e.data):console.error(t,e.message)}}createLogEntry(e,t,r){return{level:e,message:t,data:r,timestamp:new Date().toISOString()}}debug(e,t){this.logToConsole(this.createLogEntry("debug",e,t))}info(e,t){this.logToConsole(this.createLogEntry("info",e,t))}warn(e,t){this.logToConsole(this.createLogEntry("warn",e,t))}error(e,t){this.logToConsole(this.createLogEntry("error",e,t))}}let n=new a},7776:(e,t,r)=>{"use strict";r.d(t,{U:()=>i});var a=r(2600),n=r(1084),s=r(2818);let o=null;function i(){let e=s.env.NEXT_PUBLIC_SUPABASE_URL,t=s.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;return e&&t?(o||(o=(0,a.kT)(e,t)),o):(n.v.warn("Supabase credentials not found, using mock client"),{auth:{getSession:async()=>({data:{session:null},error:null}),getUser:async()=>({data:{user:null},error:null}),signInWithOAuth:async()=>({data:null,error:null}),signInWithPassword:async()=>({data:null,error:null}),signUp:async()=>({data:null,error:null}),signOut:async()=>({error:null}),onAuthStateChange:()=>({data:{subscription:{unsubscribe:()=>{}}}})},storage:{createBucket:async()=>({data:null,error:null}),from:()=>({upload:async()=>({data:{path:""},error:null}),getPublicUrl:()=>({data:{publicUrl:""}}),remove:async()=>({error:null})})},from:e=>({select:e=>({single:async()=>({data:null,error:null}),eq:()=>({data:[],error:null})}),insert:async t=>(n.v.info("Mock inserting into ".concat(e,":"),t),{data:Array.isArray(t)?t:[t],error:null}),upsert:async e=>({data:e,error:null})})})}},3749:(e,t,r)=>{"use strict";r.d(t,{vt:()=>m});let a=e=>{let t;let r=new Set,a=(e,a)=>{let n="function"==typeof e?e(t):e;if(!Object.is(n,t)){let e=t;t=(null!=a?a:"object"!=typeof n||null===n)?n:Object.assign({},t,n),r.forEach(r=>r(t,e))}},n=()=>t,s={setState:a,getState:n,getInitialState:()=>o,subscribe:e=>(r.add(e),()=>r.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},o=t=e(a,n,s);return s},n=e=>e?a(e):a;var s=r(2115),o=r(8010);let{useDebugValue:i}=s,{useSyncExternalStoreWithSelector:l}=o,c=!1,u=e=>e,d=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");let t="function"==typeof e?n(e):e,r=(e,r)=>(function(e,t=u,r){r&&!c&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),c=!0);let a=l(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return i(a),a})(t,e,r);return Object.assign(r,t),r},m=e=>e?d(e):d}},e=>{var t=t=>e(e.s=t);e.O(0,[705,441,517,358],()=>t(9631)),_N_E=e.O()}]);
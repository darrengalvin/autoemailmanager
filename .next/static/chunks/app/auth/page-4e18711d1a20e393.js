(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[365],{9631:(e,t,r)=>{Promise.resolve().then(r.bind(r,7098))},7594:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(2800).A)("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]])},8686:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(2800).A)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},6046:(e,t,r)=>{"use strict";var s=r(6658);r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},9125:(e,t,r)=>{"use strict";var s=r(2115),a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},n=s.useState,i=s.useEffect,o=s.useLayoutEffect,l=s.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!a(e,r)}catch(e){return!0}}var u="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),s=n({inst:{value:r,getSnapshot:t}}),a=s[0].inst,u=s[1];return o(function(){a.value=r,a.getSnapshot=t,c(a)&&u({inst:a})},[e,r,t]),i(function(){return c(a)&&u({inst:a}),e(function(){c(a)&&u({inst:a})})},[e]),l(r),r};t.useSyncExternalStore=void 0!==s.useSyncExternalStore?s.useSyncExternalStore:u},6854:(e,t,r)=>{"use strict";var s=r(2115),a=r(4236),n="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=a.useSyncExternalStore,o=s.useRef,l=s.useEffect,c=s.useMemo,u=s.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,r,s,a){var d=o(null);if(null===d.current){var m={hasValue:!1,value:null};d.current=m}else m=d.current;var g=i(e,(d=c(function(){function e(e){if(!l){if(l=!0,i=e,e=s(e),void 0!==a&&m.hasValue){var t=m.value;if(a(t,e))return o=t}return o=e}if(t=o,n(i,e))return t;var r=s(e);return void 0!==a&&a(t,r)?t:(i=e,o=r)}var i,o,l=!1,c=void 0===r?null:r;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,r,s,a]))[0],d[1]);return l(function(){m.hasValue=!0,m.value=g},[g]),u(g),g}},4236:(e,t,r)=>{"use strict";e.exports=r(9125)},8010:(e,t,r)=>{"use strict";e.exports=r(6854)},7098:(e,t,r)=>{"use strict";r.d(t,{AuthForm:()=>h});var s=r(5155),a=r(2115),n=r(6462);let i=(0,r(2800).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var o=r(8686),l=r(7594),c=r(6046),u=r(7867),d=r(1084),m=r(6113),g=r(7776);async function f(){let e=(0,g.U)();if(!e)throw Error("Failed to initialize Supabase client");return e.auth.signInWithOAuth({provider:"azure",options:{scopes:"email offline_access Mail.Read Mail.Send User.Read",redirectTo:"".concat(window.location.origin,"/auth/callback")}})}function y(){let[e,t]=(0,a.useState)(null),r=async()=>{try{t("microsoft"),await f()}catch(e){console.error("Microsoft login error:",e)}finally{t(null)}};return(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("button",{onClick:r,disabled:!!e,className:"w-full flex items-center justify-center gap-3 px-4 py-2.5 bg-[#2F2F2F] text-white rounded-lg hover:bg-[#1F1F1F] transition-colors disabled:opacity-50",children:["microsoft"===e?(0,s.jsx)(l.A,{className:"w-5 h-5 animate-spin"}):(0,s.jsx)(m.u,{className:"w-5 h-5"}),"Continue with Microsoft"]}),(0,s.jsxs)("button",{disabled:!0,className:"w-full flex items-center justify-center gap-3 px-4 py-2.5 bg-gray-100 text-gray-400 rounded-lg cursor-not-allowed",children:[(0,s.jsx)(n.A,{className:"w-5 h-5"}),"Continue with Google (Coming Soon)"]}),(0,s.jsx)("p",{className:"text-xs text-center text-gray-500 mt-4",children:"By continuing, you agree to grant access to your emails for AI processing"})]})}function h(){let e=(0,c.useRouter)(),{signIn:t,signUp:r,error:m,clearError:g}=(0,u.n)(),[f,h]=(0,a.useState)("login"),[x,p]=(0,a.useState)(!1),[v,w]=(0,a.useState)(null),[b,j]=(0,a.useState)({email:"",password:"",confirmPassword:""}),S=async s=>{if(s.preventDefault(),w(null),g(),"register"===f&&b.password!==b.confirmPassword){w("Passwords do not match");return}try{p(!0),"login"===f?await t(b.email,b.password):await r(b.email,b.password),e.push("/")}catch(e){d.v.error("".concat(f," failed:"),e),w("Failed to ".concat(f,". Please try again."))}finally{p(!1)}},N=async()=>{try{d.v.info("Demo login: Starting authentication"),p(!0),w(null),g(),await t("demo@smartemail.demo","demo123456"),d.v.info("Demo login: Successful sign in"),e.push("/")}catch(e){d.v.error("Demo login failed:",e),w("Failed to access demo account. Please try again.")}finally{p(!1)}};return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)(n.A,{className:"w-16 h-16 text-primary"})}),(0,s.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Welcome to Smart Email Manager"}),(0,s.jsx)("p",{className:"mt-2 text-center text-sm text-gray-600",children:"login"===f?"Sign in to your account":"Create your account"})]}),(v||m)&&(0,s.jsx)("div",{className:"bg-red-50 text-red-600 p-3 rounded-md text-sm",children:v||m}),(0,s.jsxs)("form",{onSubmit:S,className:"mt-8 space-y-6",children:[(0,s.jsxs)("div",{className:"rounded-md shadow-sm space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,s.jsx)(i,{className:"h-5 w-5 text-gray-400"})}),(0,s.jsx)("input",{id:"email",name:"email",type:"email",required:!0,value:b.email,onChange:e=>j({...b,email:e.target.value}),className:"appearance-none relative block w-full pl-10 px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-primary focus:border-primary sm:text-sm",placeholder:"Email address"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"password",className:"sr-only",children:"Password"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,s.jsx)(o.A,{className:"h-5 w-5 text-gray-400"})}),(0,s.jsx)("input",{id:"password",name:"password",type:"password",required:!0,value:b.password,onChange:e=>j({...b,password:e.target.value}),className:"appearance-none relative block w-full pl-10 px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-primary focus:border-primary sm:text-sm",placeholder:"Password"})]})]}),"register"===f&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"confirmPassword",className:"sr-only",children:"Confirm Password"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,s.jsx)(o.A,{className:"h-5 w-5 text-gray-400"})}),(0,s.jsx)("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:b.confirmPassword,onChange:e=>j({...b,confirmPassword:e.target.value}),className:"appearance-none relative block w-full pl-10 px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-primary focus:border-primary sm:text-sm",placeholder:"Confirm password"})]})]})]}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{type:"submit",disabled:x,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary hover:bg-primary-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary transition-colors disabled:opacity-50",children:x?(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(l.A,{className:"w-5 h-5 animate-spin"}),"login"===f?"Signing in...":"Creating account..."]}):"login"===f?"Sign in":"Create account"})})]}),(0,s.jsxs)("div",{className:"mt-6",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,s.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,s.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,s.jsx)("span",{className:"px-2 bg-gray-50 text-gray-500",children:"Or continue with"})})]}),(0,s.jsx)("div",{className:"mt-6",children:(0,s.jsx)(y,{})})]}),(0,s.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,s.jsx)("button",{onClick:N,disabled:x,className:"text-primary hover:text-primary-dark text-sm font-medium",children:"Try Demo Account"}),(0,s.jsx)("button",{onClick:()=>h("login"===f?"register":"login"),className:"text-gray-600 hover:text-gray-900 text-sm",children:"login"===f?"Don't have an account? Sign up":"Already have an account? Sign in"})]})]})})}},6113:(e,t,r)=>{"use strict";r.d(t,{u:()=>a});var s=r(5155);function a(e){let{className:t="w-6 h-6"}=e;return(0,s.jsxs)("svg",{className:t,viewBox:"0 0 23 23",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("path",{fill:"currentColor",d:"M0 0h11v11H0z"}),(0,s.jsx)("path",{fill:"currentColor",d:"M12 0h11v11H12z"}),(0,s.jsx)("path",{fill:"currentColor",d:"M0 12h11v11H0z"}),(0,s.jsx)("path",{fill:"currentColor",d:"M12 12h11v11H12z"})]})}},7867:(e,t,r)=>{"use strict";r.d(t,{n:()=>n});var s=r(3749),a=r(7776);let n=(0,s.vt)(e=>({user:null,isLoading:!0,error:null,setUser:t=>e({user:t}),setIsLoading:t=>e({isLoading:t}),setError:t=>e({error:t}),signIn:async(t,r)=>{try{e({isLoading:!0,error:null});let s=(0,a.U)();if(!s)throw Error("Supabase client not initialized");let{error:n}=await s.auth.signInWithPassword({email:t,password:r});if(n)throw n}catch(t){throw e({error:t instanceof Error?t.message:"Failed to sign in"}),t}finally{e({isLoading:!1})}},signUp:async(t,r)=>{try{e({isLoading:!0,error:null});let s=(0,a.U)();if(!s)throw Error("Supabase client not initialized");let{error:n}=await s.auth.signUp({email:t,password:r,options:{emailRedirectTo:"".concat(window.location.origin,"/auth/callback")}});if(n)throw n}catch(t){throw e({error:t instanceof Error?t.message:"Failed to sign up"}),t}finally{e({isLoading:!1})}},signOut:async()=>{try{e({isLoading:!0,error:null});let t=(0,a.U)();if(!t)throw Error("Supabase client not initialized");let{error:r}=await t.auth.signOut();if(r)throw r;e({user:null})}catch(t){throw e({error:t instanceof Error?t.message:"Failed to sign out"}),t}finally{e({isLoading:!1})}},clearError:()=>e({error:null})})),i=(0,a.U)();i&&i.auth.onAuthStateChange((e,t)=>{var r;n.setState({user:null!==(r=null==t?void 0:t.user)&&void 0!==r?r:null,isLoading:!1})})},1084:(e,t,r)=>{"use strict";r.d(t,{v:()=>a});class s{logToConsole(e){let t="[".concat(e.timestamp,"] [").concat(e.level.toUpperCase(),"]");switch(e.level){case"debug":e.data?console.log(t,e.message,e.data):console.log(t,e.message);break;case"info":e.data?console.info(t,e.message,e.data):console.info(t,e.message);break;case"warn":e.data?console.warn(t,e.message,e.data):console.warn(t,e.message);break;case"error":e.data?console.error(t,e.message,e.data):console.error(t,e.message)}}createLogEntry(e,t,r){return{level:e,message:t,data:r,timestamp:new Date().toISOString()}}debug(e,t){this.logToConsole(this.createLogEntry("debug",e,t))}info(e,t){this.logToConsole(this.createLogEntry("info",e,t))}warn(e,t){this.logToConsole(this.createLogEntry("warn",e,t))}error(e,t){this.logToConsole(this.createLogEntry("error",e,t))}}let a=new s},7776:(e,t,r)=>{"use strict";r.d(t,{U:()=>o});var s=r(2600),a=r(1084),n=r(2818);let i=null;function o(){let e=n.env.NEXT_PUBLIC_SUPABASE_URL,t=n.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;return e&&t?(i||(i=(0,s.kT)(e,t)),i):(a.v.warn("Supabase credentials not found, using mock client"),{auth:{getSession:async()=>({data:{session:null},error:null}),getUser:async()=>({data:{user:null},error:null}),signInWithOAuth:async()=>({data:null,error:null}),signInWithPassword:async()=>({data:null,error:null}),signUp:async()=>({data:null,error:null}),signOut:async()=>({error:null}),onAuthStateChange:()=>({data:{subscription:{unsubscribe:()=>{}}}})},storage:{createBucket:async()=>({data:null,error:null}),from:()=>({upload:async()=>({data:{path:""},error:null}),getPublicUrl:()=>({data:{publicUrl:""}}),remove:async()=>({error:null})})},from:e=>({select:e=>({single:async()=>({data:null,error:null}),eq:()=>({data:[],error:null})}),insert:async t=>(a.v.info("Mock inserting into ".concat(e,":"),t),{data:Array.isArray(t)?t:[t],error:null}),upsert:async e=>({data:e,error:null})})})}},3749:(e,t,r)=>{"use strict";r.d(t,{vt:()=>m});let s=e=>{let t;let r=new Set,s=(e,s)=>{let a="function"==typeof e?e(t):e;if(!Object.is(a,t)){let e=t;t=(null!=s?s:"object"!=typeof a||null===a)?a:Object.assign({},t,a),r.forEach(r=>r(t,e))}},a=()=>t,n={setState:s,getState:a,getInitialState:()=>i,subscribe:e=>(r.add(e),()=>r.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},i=t=e(s,a,n);return n},a=e=>e?s(e):s;var n=r(2115),i=r(8010);let{useDebugValue:o}=n,{useSyncExternalStoreWithSelector:l}=i,c=!1,u=e=>e,d=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");let t="function"==typeof e?a(e):e,r=(e,r)=>(function(e,t=u,r){r&&!c&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),c=!0);let s=l(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return o(s),s})(t,e,r);return Object.assign(r,t),r},m=e=>e?d(e):d}},e=>{var t=t=>e(e.s=t);e.O(0,[705,441,517,358],()=>t(9631)),_N_E=e.O()}]);
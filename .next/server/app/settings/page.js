(()=>{var e={};e.id=662,e.ids=[662],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},9428:e=>{"use strict";e.exports=require("buffer")},5511:e=>{"use strict";e.exports=require("crypto")},4735:e=>{"use strict";e.exports=require("events")},1630:e=>{"use strict";e.exports=require("http")},5591:e=>{"use strict";e.exports=require("https")},1645:e=>{"use strict";e.exports=require("net")},3873:e=>{"use strict";e.exports=require("path")},1997:e=>{"use strict";e.exports=require("punycode")},7910:e=>{"use strict";e.exports=require("stream")},4631:e=>{"use strict";e.exports=require("tls")},9551:e=>{"use strict";e.exports=require("url")},4075:e=>{"use strict";e.exports=require("zlib")},3145:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>m,pages:()=>o,routeModule:()=>x,tree:()=>c});var a=t(260),i=t(8203),r=t(5155),l=t.n(r),n=t(7292),d={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);t.d(s,d);let c=["",{children:["settings",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,6153)),"/Users/darrengalvin/Downloads/email connector/src/app/settings/page.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,8421)),"/Users/darrengalvin/Downloads/email connector/src/app/settings/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,2126)),"/Users/darrengalvin/Downloads/email connector/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,9116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,1485,23)),"next/dist/client/components/unauthorized-error"]}],o=["/Users/darrengalvin/Downloads/email connector/src/app/settings/page.tsx"],m={require:t,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/settings/page",pathname:"/settings",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},4564:(e,s,t)=>{Promise.resolve().then(t.bind(t,364))},3623:(e,s,t)=>{Promise.resolve().then(t.bind(t,1762))},6487:()=>{},8335:()=>{},236:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(3258).A)("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]])},142:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(3258).A)("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]])},2557:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(3258).A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},6873:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(3258).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},617:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(3258).A)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},2744:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(3258).A)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},1762:(e,s,t)=>{"use strict";t.d(s,{SettingsPanel:()=>ee});var a=t(5512),i=t(8009),r=t(4520);function l(){return(0,a.jsx)("div",{className:"bg-white border-b",children:(0,a.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(r.A,{className:"w-6 h-6 text-primary"}),(0,a.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Settings"})]})})})}var n=t(142),d=t(236),c=t(8866),o=t(3258);let m=(0,o.A)("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);var x=t(384),u=t(8976);function p({activeSection:e,onSectionChange:s}){let t=[{id:"general",label:"General",icon:r.A},{id:"branding",label:"Branding",icon:n.A},{id:"ai-models",label:"AI Models",icon:d.A},{id:"email",label:"Email",icon:c.A},{id:"integrations",label:"Integrations",icon:m},{id:"security",label:"Security",icon:x.A},{id:"database",label:"Database",icon:u.A}];return(0,a.jsx)("nav",{className:"w-48 space-y-0.5",children:t.map(({id:t,label:i,icon:r})=>(0,a.jsxs)("button",{onClick:()=>s(t),className:`w-full flex items-center gap-2 px-3 py-2 text-sm font-medium rounded-md transition-colors ${e===t?"bg-primary text-white":"text-gray-600 hover:bg-gray-100"}`,children:[(0,a.jsx)(r,{className:"w-4 h-4"}),i]},t))})}function h({settings:e,onUpdate:s}){return(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"General Settings"}),(0,a.jsxs)("div",{className:"grid gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Default Language"}),(0,a.jsxs)("select",{className:"w-full rounded-md border-gray-300",value:e.emailSettings.language,onChange:t=>s({emailSettings:{...e.emailSettings,language:t.target.value}}),children:[(0,a.jsx)("option",{value:"en",children:"English"}),(0,a.jsx)("option",{value:"es",children:"Spanish"}),(0,a.jsx)("option",{value:"fr",children:"French"}),(0,a.jsx)("option",{value:"de",children:"German"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Time Zone"}),(0,a.jsxs)("select",{className:"w-full rounded-md border-gray-300",children:[(0,a.jsx)("option",{children:"UTC"}),(0,a.jsx)("option",{children:"Eastern Time"}),(0,a.jsx)("option",{children:"Pacific Time"}),(0,a.jsx)("option",{children:"Central European Time"})]})]})]})]})})}let g=(0,o.A)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);var y=t(2744),f=t(4432),j=t(2676),b=t(6613);function v({config:e,onUpdate:s}){let[t,r]=(0,i.useState)(e),[l,d]=(0,i.useState)(e.logoUrl),[c,o]=(0,i.useState)(!1),[m,x]=(0,i.useState)(null),{updateSettings:u}=(0,b.x)(),p=async e=>{let a=e.target.files?.[0];if(a){x(null),o(!0);try{let e=(0,j.U)();if(!e)throw Error("Could not initialize Supabase client");let{data:i,error:l}=await e.storage.createBucket("logos",{public:!0,fileSizeLimit:2097152});if(l&&!l.message.includes("already exists"))throw l;let n=a.name.split(".").pop(),c=`logo-${Date.now()}.${n}`,{data:o,error:m}=await e.storage.from("logos").upload(c,a,{cacheControl:"3600",upsert:!1});if(m)throw m;let{data:{publicUrl:x}}=e.storage.from("logos").getPublicUrl(o.path),p={...t,logoUrl:x};r(p),d(x),s(p),u(p)}catch(e){console.error("Error uploading logo:",e),x(e instanceof Error?e.message:"Failed to upload logo")}finally{o(!1)}}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(n.A,{className:"w-5 h-5 text-primary"}),(0,a.jsx)("h2",{className:"text-lg font-medium",children:"Branding Settings"})]}),(0,a.jsx)("div",{className:"grid gap-6",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company Logo"}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-16 h-16 border rounded-lg flex items-center justify-center bg-gray-50",children:l?(0,a.jsx)("img",{src:l,alt:"Logo",className:"max-w-full max-h-full object-contain",onError:()=>d(null)}):(0,a.jsx)(g,{className:"w-8 h-8 text-gray-400"})}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsxs)("label",{className:"cursor-pointer",children:[(0,a.jsx)("input",{type:"file",className:"hidden",accept:"image/*",onChange:p,disabled:c}),(0,a.jsxs)("span",{className:"inline-flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-md hover:bg-primary-dark disabled:opacity-50",children:[(0,a.jsx)(y.A,{className:"w-4 h-4"}),c?"Uploading...":"Upload Logo"]})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Maximum file size: 2MB. Supported formats: PNG, JPG, SVG"})]})]}),m&&(0,a.jsxs)("div",{className:"mt-2 flex items-center gap-2 text-sm text-red-600",children:[(0,a.jsx)(f.A,{className:"w-4 h-4"}),m]})]})})]})}let N={anthropic:{name:"Anthropic Claude",description:"Advanced language model with strong reasoning capabilities",defaultConfig:{enabled:!0,apiKey:"",maxTokens:2e3,temperature:.7,prompts:{systemPrompt:"You are an AI assistant helping with email management.",additionalInstructions:""}}},openai:{name:"OpenAI GPT-4",description:"Latest GPT model with enhanced capabilities",defaultConfig:{enabled:!1,apiKey:"",maxTokens:2e3,temperature:.7,prompts:{systemPrompt:"You are an AI assistant helping with email management.",additionalInstructions:""}}},deepseek:{name:"DeepSeek",description:"Advanced AI model for complex tasks",defaultConfig:{enabled:!1,apiKey:"",maxTokens:2e3,temperature:.7,prompts:{systemPrompt:"You are an AI assistant helping with email management.",additionalInstructions:""}}}};function w({models:e,activeTab:s,onTabChange:t}){return(0,a.jsx)("div",{className:"flex gap-2",children:Object.entries(e).map(([e])=>(0,a.jsx)("button",{onClick:()=>t(e),className:`px-4 py-2 rounded-md text-sm font-medium ${s===e?"bg-primary text-white":"text-gray-600 hover:bg-gray-100"}`,children:e.charAt(0).toUpperCase()+e.slice(1)},e))})}var k=t(6766);let A=(0,o.A)("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);async function C(e,s){if(!s.apiKey)return{success:!1,message:"API key is required"};try{let t=await fetch("/api/ai/test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:e,config:s,testInput:s.prompts.systemPrompt})});if(!t.ok){let e=await t.json();throw Error(e.error||"API test failed")}let a=await t.json();return{success:!0,message:"API test successful",response:a.response}}catch(e){return console.error("AI test failed:",e),{success:!1,message:e instanceof Error?e.message:"API test failed"}}}function S({modelId:e,config:s,onUpdate:t,showAdvanced:r}){let[l,n]=(0,i.useState)(!1),[d,c]=(0,i.useState)(null),[o,m]=(0,i.useState)(null),x=async()=>{if(!s.apiKey){m("API key is required");return}n(!0),c(null),m(null);try{let t=await C(e,s);t.success?c("API test successful"):m(t.message)}catch(e){m(e instanceof Error?e.message:"API test failed")}finally{n(!1)}};return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"API Key"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"password",value:s.apiKey,onChange:e=>t({apiKey:e.target.value}),className:"flex-1 rounded-md",placeholder:`Enter ${e} API key`}),(0,a.jsx)("button",{onClick:x,disabled:l||!s.apiKey,className:"px-4 py-2 bg-primary text-white rounded-md hover:bg-primary-dark disabled:opacity-50 flex items-center gap-2",children:l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(k.A,{className:"w-4 h-4 animate-spin"})," Testing..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(A,{className:"w-4 h-4"})," Test API"]})})]}),d&&(0,a.jsxs)("div",{className:"mt-2 text-sm text-green-600 flex items-center gap-2",children:[(0,a.jsx)(A,{className:"w-4 h-4"}),d]}),o&&(0,a.jsxs)("div",{className:"mt-2 text-sm text-red-600 flex items-center gap-2",children:[(0,a.jsx)(f.A,{className:"w-4 h-4"}),o]})]}),r&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Tokens"}),(0,a.jsx)("input",{type:"number",value:s.maxTokens,onChange:e=>t({maxTokens:parseInt(e.target.value)}),className:"w-32 rounded-md",min:1,max:32e3})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Temperature"}),(0,a.jsx)("input",{type:"number",value:s.temperature,onChange:e=>t({temperature:parseFloat(e.target.value)}),className:"w-32 rounded-md",min:0,max:2,step:.1})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"System Prompt"}),(0,a.jsx)("textarea",{value:s.prompts.systemPrompt,onChange:e=>t({prompts:{...s.prompts,systemPrompt:e.target.value}}),rows:4,className:"w-full rounded-md"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Additional Instructions"}),(0,a.jsx)("textarea",{value:s.prompts.additionalInstructions,onChange:e=>t({prompts:{...s.prompts,additionalInstructions:e.target.value}}),rows:2,className:"w-full rounded-md"})]})]})]})}function P({models:e={},defaultModel:s="anthropic",onUpdate:t}){let[r,l]=(0,i.useState)(s),[n,d]=(0,i.useState)(!1),c=(s,a)=>{t({...e,[s]:{...e[s],...a}})};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(w,{models:e,activeTab:r,onTabChange:l}),r&&e[r]&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:e[r].enabled,onChange:e=>c(r,{enabled:e.target.checked}),className:"rounded text-primary focus:ring-primary"}),(0,a.jsxs)("label",{className:"text-sm font-medium text-gray-900",children:["Enable ",r.charAt(0).toUpperCase()+r.slice(1)]})]}),(0,a.jsx)("button",{onClick:()=>d(!n),className:"text-sm text-primary hover:text-primary-dark",children:n?"Hide Advanced":"Show Advanced"})]}),(0,a.jsx)(S,{modelId:r,config:e[r],onUpdate:e=>c(r,e),showAdvanced:n})]})]})}function I({models:e={},defaultModel:s="anthropic",onUpdate:t}){let i=(s,a)=>{t({...e,[s]:{...e[s]||N[s].defaultConfig,...a}})};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-blue-900 mb-2",children:"Available Models"}),(0,a.jsx)("div",{className:"grid gap-3",children:Object.entries(N).map(([s,{name:t,description:r}])=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-blue-900",children:t}),(0,a.jsx)("p",{className:"text-sm text-blue-700",children:r})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:e[s]?.enabled??!1,onChange:e=>i(s,{enabled:e.target.checked}),className:"rounded text-primary focus:ring-primary"}),(0,a.jsx)("span",{className:"text-sm text-blue-700",children:e[s]?.enabled?"Enabled":"Disabled"})]})]},s))})]}),(0,a.jsx)(P,{models:e,defaultModel:s,onUpdate:t})]})}var M=t(4269),E=t(6509);function T({isOpen:e,onClose:s,onConnect:t}){let[r,l]=(0,i.useState)(null),n=async e=>{l(e);try{await t(e)}finally{l(null),s()}};return e?(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg w-full max-w-md p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Connect Email Account"}),(0,a.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:(0,a.jsx)(M.A,{className:"w-6 h-6"})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("button",{onClick:()=>n("microsoft"),disabled:!!r,className:"w-full flex items-center gap-3 p-4 bg-[#f3f6fc] hover:bg-[#e9ecf5] rounded-lg group transition-colors",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-[#05a6f0] rounded-lg flex items-center justify-center group-hover:scale-105 transition-transform",children:"microsoft"===r?(0,a.jsx)(k.A,{className:"w-6 h-6 text-white animate-spin"}):(0,a.jsx)(E.u,{className:"w-6 h-6 text-white"})}),(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900",children:"Microsoft 365"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Connect Outlook or Office 365 account"})]})]}),(0,a.jsxs)("button",{onClick:()=>n("google"),disabled:!!r,className:"w-full flex items-center gap-3 p-4 bg-[#f8f9fa] hover:bg-[#f1f3f4] rounded-lg group transition-colors",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-white border border-gray-200 rounded-lg flex items-center justify-center group-hover:scale-105 transition-transform",children:"google"===r?(0,a.jsx)(k.A,{className:"w-6 h-6 animate-spin"}):(0,a.jsx)(c.A,{className:"w-6 h-6 text-gray-600"})}),(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900",children:"Google"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Connect Gmail or Google Workspace account"})]})]})]})]})}):null}var U=t(6873);let D=(0,o.A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),q=(0,o.A)("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]),L=(0,o.A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);function _({excludedEmails:e,onAdd:s,onRemove:t}){let[r,l]=(0,i.useState)(""),[n,d]=(0,i.useState)(""),[c,o]=(0,i.useState)(""),m=e.filter(e=>e.email.toLowerCase().includes(c.toLowerCase())||e.reason?.toLowerCase().includes(c.toLowerCase()));return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Excluded Emails"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(U.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Search exclusions...",value:c,onChange:e=>o(e.target.value),className:"pl-9 pr-4 py-2 border rounded-md text-sm"})]})]}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),r&&(s(r,n),l(""),d(""))},className:"flex gap-3",children:[(0,a.jsx)("input",{type:"email",placeholder:"Email address to exclude",value:r,onChange:e=>l(e.target.value),className:"flex-1 rounded-md border-gray-300",required:!0}),(0,a.jsx)("input",{type:"text",placeholder:"Reason (optional)",value:n,onChange:e=>d(e.target.value),className:"flex-1 rounded-md border-gray-300"}),(0,a.jsxs)("button",{type:"submit",className:"px-4 py-2 bg-primary text-white rounded-md hover:bg-primary-dark flex items-center gap-2",children:[(0,a.jsx)(D,{className:"w-4 h-4"}),"Add"]})]}),(0,a.jsx)("div",{className:"bg-white rounded-lg border divide-y",children:0===m.length?(0,a.jsx)("div",{className:"p-4 text-center text-gray-500",children:"No excluded emails found"}):m.map(e=>(0,a.jsxs)("div",{className:"p-4 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(q,{className:"w-5 h-5 text-red-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:e.email}),e.reason&&(0,a.jsx)("p",{className:"text-sm text-gray-500",children:e.reason}),(0,a.jsxs)("p",{className:"text-xs text-gray-400",children:["Added ",new Date(e.addedAt).toLocaleDateString()," by ",e.addedBy]})]})]}),(0,a.jsx)("button",{onClick:()=>t(e.id),className:"text-gray-400 hover:text-red-500",children:(0,a.jsx)(L,{className:"w-4 h-4"})})]},e.id))})]})}var G=t(4643),K=t(195);function F({settings:e,onUpdate:s}){return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(G.A,{className:"w-5 h-5 text-primary"}),(0,a.jsx)("h3",{className:"text-lg font-medium",children:"Email Delay Settings"})]}),(0,a.jsx)("button",{className:"text-gray-500 hover:text-gray-700",title:"Learn more about email delay",children:(0,a.jsx)(K.A,{className:"w-5 h-5"})})]}),(0,a.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"What is Email Delay?"}),(0,a.jsx)("p",{className:"text-sm text-blue-700",children:"Email delay adds a buffer time between AI processing and sending emails. This gives you time to review and modify AI-generated responses before they're sent. It's particularly useful for:"}),(0,a.jsxs)("ul",{className:"mt-2 space-y-1 text-sm text-blue-700 list-disc list-inside",children:[(0,a.jsx)("li",{children:"Ensuring accuracy of AI responses"}),(0,a.jsx)("li",{children:"Making last-minute adjustments"}),(0,a.jsx)("li",{children:"Preventing accidental sends"}),(0,a.jsx)("li",{children:"Maintaining quality control"})]})]}),(0,a.jsxs)("div",{className:"grid gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Delay Duration (minutes)"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"number",min:0,max:1440,value:e.replyDelay,onChange:e=>s({replyDelay:parseInt(e.target.value)}),className:"w-24 rounded-md"}),(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"minutes"})]}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Set to 0 for immediate sending"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-yellow-50 rounded-lg",children:[(0,a.jsx)("div",{className:"p-2 bg-yellow-100 rounded-full",children:(0,a.jsx)(G.A,{className:"w-4 h-4 text-yellow-700"})}),(0,a.jsxs)("p",{className:"text-sm text-yellow-700",children:["Current delay: ",0===e.replyDelay?"No delay":`${e.replyDelay} minutes`]})]})]})]})}function O({settings:e,onUpdate:s}){let[t,r]=(0,i.useState)(!1),l=async e=>{console.log(`Connecting to ${e}...`),r(!1)};return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsx)(F,{settings:e,onUpdate:s}),(0,a.jsx)(_,{excludedEmails:e.excludedEmails||[],onAdd:(t,a)=>{let i={id:crypto.randomUUID(),email:t,reason:a,addedAt:new Date,addedBy:e.userId||"unknown"};s({excludedEmails:[...e.excludedEmails||[],i]})},onRemove:t=>{s({excludedEmails:(e.excludedEmails||[]).filter(e=>e.id!==t)})}}),(0,a.jsx)(T,{isOpen:t,onClose:()=>r(!1),onConnect:l})]})}function z({settings:e,onUpdate:s}){return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Security Settings"}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Two-Factor Authentication"}),(0,a.jsxs)("div",{className:"mt-2 flex items-center gap-4",children:[(0,a.jsx)("button",{className:"px-4 py-2 bg-primary text-white rounded-md hover:bg-primary-dark",children:"Enable 2FA"}),(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Protect your account with an additional layer of security"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Session Management"}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("button",{className:"text-red-600 hover:text-red-700 text-sm font-medium",children:"Sign out of all other sessions"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"API Access"}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("button",{className:"px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50 text-sm",children:"Generate New API Key"})})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Access Logs"}),(0,a.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,a.jsx)("div",{className:"space-y-3",children:[{event:"Login from new device",time:"2 hours ago",location:"London, UK"},{event:"Password changed",time:"3 days ago",location:"Paris, FR"},{event:"API key generated",time:"1 week ago",location:"New York, US"}].map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.event}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:e.location})]}),(0,a.jsx)("span",{className:"text-xs text-gray-400",children:e.time})]},s))})})]})]})}var R=t(2557),B=t(8261),$=t(8458);function H({config:e,onUpdate:s}){let[t,r]=(0,i.useState)(!1),l=async()=>{r(!0);try{await new Promise(e=>setTimeout(e,1500))}finally{r(!1)}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(u.A,{className:"w-5 h-5 text-primary"}),(0,a.jsx)("h2",{className:"text-lg font-medium",children:"Database Configuration"})]}),(0,a.jsx)("button",{onClick:l,disabled:t,className:"px-4 py-2 bg-primary text-white rounded-md hover:bg-primary-dark disabled:opacity-50 flex items-center gap-2",children:t?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(R.A,{className:"w-4 h-4 animate-spin"}),"Initializing..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(B.A,{className:"w-4 h-4"}),"Initialize Database"]})})]}),(0,a.jsxs)("div",{className:"grid gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Database URL"}),(0,a.jsx)("input",{type:"text",value:e.url,onChange:e=>s({url:e.target.value}),className:"w-full rounded-md",placeholder:"postgres://user:pass@host:5432/dbname"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Database Key"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"password",value:e.key,onChange:e=>s({key:e.target.value}),className:"flex-1 rounded-md",placeholder:"your-database-key"}),(0,a.jsx)("button",{className:"p-2 text-gray-400 hover:text-gray-600",children:(0,a.jsx)($.A,{className:"w-5 h-5"})})]})]})]}),(0,a.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-blue-700 mb-2",children:[(0,a.jsx)(f.A,{className:"w-5 h-5"}),(0,a.jsx)("h3",{className:"font-medium",children:"Database Schema"})]}),(0,a.jsxs)("div",{className:"space-y-2 text-sm text-blue-600",children:[(0,a.jsx)("p",{children:"The following tables will be created:"}),(0,a.jsxs)("ul",{className:"list-disc list-inside space-y-1",children:[(0,a.jsx)("li",{children:"emails - Store email data and metadata"}),(0,a.jsx)("li",{children:"embeddings - Vector embeddings for AI training"}),(0,a.jsx)("li",{children:"email_templates - Reusable email templates"}),(0,a.jsx)("li",{children:"token_usage - Track AI token consumption"}),(0,a.jsx)("li",{children:"user_settings - User preferences and configurations"})]})]})]})]})}let V=(0,o.A)("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);var W=t(617);let Y=[{id:"microsoft365",name:"Microsoft 365",description:"Connect your Outlook or Office 365 account",category:"email",icon:"/microsoft.svg",popular:!0},{id:"gmail",name:"Gmail",description:"Connect your Gmail or Google Workspace account",category:"email",icon:"/gmail.svg",popular:!0},{id:"openai",name:"OpenAI",description:"Connect to OpenAI API for advanced AI capabilities",category:"ai",icon:"/openai.svg",popular:!0},{id:"anthropic",name:"Anthropic",description:"Use Claude for enhanced language processing",category:"ai",icon:"/anthropic.svg",popular:!0},{id:"deepseek",name:"DeepSeek",description:"Advanced AI model integration",category:"ai",icon:"/deepseek.svg"},{id:"gemini",name:"Google Gemini",description:"Google's latest AI model integration",category:"ai",icon:"/gemini.svg"}];function J(){let[e,s]=(0,i.useState)(""),[t,r]=(0,i.useState)(null),[l,n]=(0,i.useState)([]),d=Y.filter(s=>{let a=s.name.toLowerCase().includes(e.toLowerCase())||s.description.toLowerCase().includes(e.toLowerCase()),i=!t||s.category===t;return a&&i}),c=async e=>{await new Promise(e=>setTimeout(e,1e3)),n(s=>[...s,e])},o=async e=>{await new Promise(e=>setTimeout(e,1e3)),n(s=>s.filter(s=>s!==e))};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(m,{className:"w-5 h-5 text-primary"}),(0,a.jsx)("h2",{className:"text-lg font-medium",children:"Integrations"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(U.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Search integrations...",value:e,onChange:e=>s(e.target.value),className:"pl-9 pr-4 py-2 border rounded-md"})]}),(0,a.jsxs)("select",{value:t||"",onChange:e=>r(e.target.value||null),className:"border rounded-md px-3 py-2",children:[(0,a.jsx)("option",{value:"",children:"All Categories"}),(0,a.jsx)("option",{value:"email",children:"Email"}),(0,a.jsx)("option",{value:"ai",children:"AI Models"})]})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:d.map(e=>(0,a.jsx)("div",{className:"p-4 border rounded-lg hover:border-primary transition-colors",children:(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)(V,{className:"w-6 h-6 text-gray-600"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900",children:e.name}),e.popular&&(0,a.jsxs)("span",{className:"flex items-center gap-1 text-xs text-yellow-600 bg-yellow-50 px-2 py-0.5 rounded-full",children:[(0,a.jsx)(W.A,{className:"w-3 h-3"}),"Popular"]})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.description}),(0,a.jsx)("button",{onClick:()=>l.includes(e.id)?o(e.id):c(e.id),className:`mt-3 px-4 py-2 rounded-md text-sm font-medium ${l.includes(e.id)?"bg-red-50 text-red-600 hover:bg-red-100":"bg-primary text-white hover:bg-primary-dark"}`,children:l.includes(e.id)?"Disconnect":"Connect"})]})]})},e.id))})]})}var X=t(282);async function Z(e){let s=(0,j.U)();if(!s)throw Error("Failed to initialize Supabase client");let{data:{user:t}}=await s.auth.getUser();if(!t)throw Error("User not authenticated");try{let{error:a}=await s.from("user_settings").upsert({user_id:t.id,email_settings:{...e.emailSettings,models:void 0,defaultModel:void 0},branding:e.branding,ai_models:e.emailSettings?.models||Object.entries(N).reduce((e,[s,{defaultConfig:t}])=>({...e,[s]:t}),{}),default_ai_model:e.emailSettings?.defaultModel||"anthropic",updated_at:new Date().toISOString()},{onConflict:"user_id"});if(a)throw a;X.v.info("Settings saved successfully")}catch(e){throw X.v.error("Failed to save settings:",e),e}}let Q={emailSettings:{tone:"formal",language:"en",signature:"",replyDelay:0,excludedEmails:[],aiRules:{enabled:!1,allowedSenders:[],excludedSenders:[],keywords:[],maxTokensPerEmail:2e3,monthlyTokenBudget:1e5,processRules:{processAll:!0,processFromList:!1,processWithKeywords:!1}},tokenUsage:{currentMonthTokens:0,monthlyLimit:1e5,costPerThousandTokens:.02},models:{anthropic:{enabled:!0,apiKey:"",maxTokens:2e3,temperature:.7,prompts:{systemPrompt:"",additionalInstructions:""}}},defaultModel:"anthropic"},microsoftClientId:"",microsoftTenantId:"",supabaseConfig:{url:"",key:"",embeddingsTable:"embeddings"},branding:{logoUrl:null,primaryColor:"#014380",secondaryColor:"#014584",companyName:"",emailSignature:""},openaiApiKey:"",anthropicApiKey:""};function ee(){let[e,s]=(0,i.useState)("ai-models"),[t,r]=(0,i.useState)(Q),[n,d]=(0,i.useState)(!1),c=async e=>{let s={...t,...e};r(s),d(!0);try{await Z(s)}catch(e){console.error("Failed to save settings:",e)}finally{d(!1)}};return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)(l,{}),(0,a.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,a.jsxs)("div",{className:"flex gap-8",children:[(0,a.jsx)(p,{activeSection:e,onSectionChange:s}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[n&&(0,a.jsx)("div",{className:"mb-4 text-sm text-blue-600",children:"Saving changes..."}),"general"===e&&(0,a.jsx)(h,{settings:t,onUpdate:c}),"branding"===e&&(0,a.jsx)(v,{config:t.branding,onUpdate:e=>c({branding:e})}),"ai-models"===e&&(0,a.jsx)(I,{models:t.emailSettings.models,defaultModel:t.emailSettings.defaultModel,onUpdate:(e,s)=>c({emailSettings:{...t.emailSettings,models:e,...s&&{defaultModel:s}}})}),"email"===e&&(0,a.jsx)(O,{settings:t.emailSettings,onUpdate:e=>c({emailSettings:{...t.emailSettings,...e}})}),"integrations"===e&&(0,a.jsx)(J,{}),"security"===e&&(0,a.jsx)(z,{settings:t,onUpdate:c}),"database"===e&&(0,a.jsx)(H,{config:t.supabaseConfig,onUpdate:e=>c({supabaseConfig:{...t.supabaseConfig,...e}})})]})})]})})]})}},8421:(e,s,t)=>{"use strict";function a({children:e}){return e}t.r(s),t.d(s,{default:()=>a})},6153:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>l,metadata:()=>r});var a=t(2740),i=t(364);let r={title:"Settings | Smart Email Manager",description:"Configure your email settings and connections"};function l(){return(0,a.jsx)(i.SettingsPanel,{})}},364:(e,s,t)=>{"use strict";t.d(s,{SettingsPanel:()=>a});let a=(0,t(6760).registerClientReference)(function(){throw Error("Attempted to call SettingsPanel() from the server but SettingsPanel is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/darrengalvin/Downloads/email connector/src/components/settings/SettingsPanel.tsx","SettingsPanel")}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[638,806,150],()=>t(3145));module.exports=a})();
(()=>{var e={};e.id=995,e.ids=[995],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},5483:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>x,routeModule:()=>d,serverHooks:()=>h,workAsyncStorage:()=>l,workUnitAsyncStorage:()=>m});var s={};r.r(s),r.d(s,{POST:()=>p});var o=r(2706),a=r(8203),n=r(5994),i=r(9187);async function p(e){try{let t;let{model:r,config:s,testInput:o}=await e.json();if(!r||!s)return i.NextResponse.json({error:"Missing required parameters"},{status:400});if(!s.apiKey)return i.NextResponse.json({error:"API key is required"},{status:400});try{switch(r){case"anthropic":t=await c(s.apiKey,o);break;case"openai":t=await u(s.apiKey,o);break;default:return i.NextResponse.json({error:`Unsupported model: ${r}`},{status:400})}}catch(e){return i.NextResponse.json({error:e instanceof Error?e.message:"API test failed"},{status:401})}return i.NextResponse.json({success:!0,response:t})}catch(e){return console.error("AI test failed:",e),i.NextResponse.json({error:e instanceof Error?e.message:"Test failed"},{status:500})}}async function c(e,t){let r=await fetch("https://api.anthropic.com/v1/messages",{method:"POST",headers:{"Content-Type":"application/json","x-api-key":e,"anthropic-version":"2023-06-01"},body:JSON.stringify({model:"claude-3-opus-20240229",max_tokens:1e3,messages:[{role:"user",content:t}]})}),s=await r.json();if(!r.ok)throw Error(s.error?.message||`Anthropic API error: ${r.statusText}`);if(!s.content?.[0]?.text)throw Error("Invalid response from Anthropic API");return s.content[0].text}async function u(e,t){let r=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({model:"gpt-4",messages:[{role:"user",content:t}],max_tokens:1e3})}),s=await r.json();if(!r.ok)throw Error(s.error?.message||`OpenAI API error: ${r.statusText}`);if(!s.choices?.[0]?.message?.content)throw Error("Invalid response from OpenAI API");return s.choices[0].message.content}let d=new o.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/ai/test/route",pathname:"/api/ai/test",filename:"route",bundlePath:"app/api/ai/test/route"},resolvedPagePath:"/Users/darrengalvin/Downloads/email connector/src/app/api/ai/test/route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:l,workUnitAsyncStorage:m,serverHooks:h}=d;function x(){return(0,n.patchFetch)({workAsyncStorage:l,workUnitAsyncStorage:m})}},6487:()=>{},8335:()=>{}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,452],()=>r(5483));module.exports=s})();
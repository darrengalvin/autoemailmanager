(()=>{var e={};e.id=620,e.ids=[620],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},9428:e=>{"use strict";e.exports=require("buffer")},5511:e=>{"use strict";e.exports=require("crypto")},4735:e=>{"use strict";e.exports=require("events")},1630:e=>{"use strict";e.exports=require("http")},5591:e=>{"use strict";e.exports=require("https")},1645:e=>{"use strict";e.exports=require("net")},3873:e=>{"use strict";e.exports=require("path")},1997:e=>{"use strict";e.exports=require("punycode")},7910:e=>{"use strict";e.exports=require("stream")},4631:e=>{"use strict";e.exports=require("tls")},9551:e=>{"use strict";e.exports=require("url")},4075:e=>{"use strict";e.exports=require("zlib")},2953:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>m,pages:()=>d,routeModule:()=>x,tree:()=>o});var a=t(260),r=t(8203),i=t(5155),n=t.n(i),l=t(7292),c={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);t.d(s,c);let o=["",{children:["setup",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,4611)),"/Users/darrengalvin/Downloads/email connector/src/app/setup/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,2126)),"/Users/darrengalvin/Downloads/email connector/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,9116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,1485,23)),"next/dist/client/components/unauthorized-error"]}],d=["/Users/darrengalvin/Downloads/email connector/src/app/setup/page.tsx"],m={require:t,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/setup/page",pathname:"/setup",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},4570:(e,s,t)=>{Promise.resolve().then(t.bind(t,3274))},8850:(e,s,t)=>{Promise.resolve().then(t.bind(t,1945))},236:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(3258).A)("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]])},4949:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(3258).A)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},2734:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(3258).A)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},142:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(3258).A)("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]])},2557:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(3258).A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},2744:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(3258).A)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},1945:(e,s,t)=>{"use strict";t.d(s,{SetupGuide:()=>T});var a=t(5512),r=t(8009),i=t(3258);let n=(0,i.A)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);var l=t(8976),c=t(8261);let o=(0,i.A)("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);var d=t(8866),m=t(142),x=t(384),h=t(4849),u=t(4269),p=t(8442),g=t(2163),f=t(8458),j=t(4432),y=t(2557),b=t(2676);function N({tables:e,onRetry:s}){return(0,a.jsx)("div",{className:"grid gap-3",children:e.map(e=>(0,a.jsxs)("div",{className:`flex items-center gap-3 p-3 rounded-lg ${e.checking?"bg-blue-100 ring-2 ring-blue-200":e.exists?"bg-green-50":e.error?"bg-red-50":"bg-white/60"}`,children:[(0,a.jsx)(c.A,{className:`w-5 h-5 ${e.checking?"text-blue-600":e.exists?"text-green-600":e.error?"text-red-500":"text-gray-400"}`}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.description}),e.error&&(0,a.jsx)("p",{className:"text-sm text-red-600 mt-1",children:e.error})]}),e.checking?(0,a.jsx)(y.A,{className:"w-4 h-4 text-blue-600 animate-spin"}):e.exists?(0,a.jsx)(h.A,{className:"w-4 h-4 text-green-600"}):(0,a.jsx)("button",{onClick:()=>s(e.name),className:"px-2 py-1 text-xs bg-red-100 text-red-600 rounded hover:bg-red-200",children:"Retry"})]},e.name))})}let v=[{name:"users",description:"User profiles and settings",exists:!1,checking:!1},{name:"emails",description:"Email data and metadata",exists:!1,checking:!1},{name:"email_threads",description:"Email conversation threads",exists:!1,checking:!1},{name:"ai_suggestions",description:"AI-generated email responses",exists:!1,checking:!1},{name:"email_categories",description:"Custom email categorization",exists:!1,checking:!1},{name:"token_usage",description:"AI token usage tracking",exists:!1,checking:!1}];var w=t(282);async function k(e){try{let s=(0,b.U)();if(!s)throw Error("Could not create Supabase client");let t=(await s.from(e).select("count",{count:"exact",head:!0}).single()).error;return!t||t.message.includes("permission denied")}catch(s){return w.v.error(`Failed to verify table ${e}:`,s),!1}}var S=t(864),A=t(2734),C=t(236),P=t(4949),I=t(6509),M=t(9968),E=t(2744);async function _(e,s,t){try{let a=(0,b.U)();if(!a)throw Error("Could not initialize Supabase client");let{error:r}=await a.storage.createBucket(e,{public:!0,fileSizeLimit:5242880});if(r&&!r.message.includes("already exists"))throw r;let i=t?.path||`${Date.now()}-${s.name}`,{data:n,error:l}=await a.storage.from(e).upload(i,s,{cacheControl:t?.cacheControl||"3600",upsert:t?.upsert??!1});if(l)throw l;let{data:{publicUrl:c}}=a.storage.from(e).getPublicUrl(n?.path||i);return{path:n?.path||i,url:c}}catch(e){return w.v.error("File upload failed:",e),{path:`mock/${Date.now()}-${s.name}`,url:"https://via.placeholder.com/150"}}}let U={id:"welcome",title:"Welcome",description:"Project overview and getting started",icon:n,component:function({onComplete:e}){let[s,t]=(0,r.useState)(!1),[i,n]=(0,r.useState)(!1);return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsx)("section",{className:"bg-green-50 p-6 rounded-lg border border-green-100",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(x.A,{className:"w-8 h-8 text-green-600 flex-shrink-0"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-green-900 mb-2",children:"100% Private & Secure"}),(0,a.jsx)("p",{className:"text-green-800",children:"Unlike traditional SaaS solutions, we never store your data on our servers. Everything runs on your own infrastructure, giving you complete control and ownership. Your emails, data, and AI configurations remain exclusively in your Supabase instance."})]})]})}),(0,a.jsxs)("section",{className:"space-y-4",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"About This Project"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("p",{className:"text-gray-600",children:"Smart Email Manager is your AI email assistant that actually writes responses in your tone of voice. Upload examples of your writing style, and the AI learns to communicate exactly like you would - but you always remain in control with an approval system for every response."}),(0,a.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,a.jsx)("h3",{className:"font-medium text-blue-900 mb-2",children:"How It Works:"}),(0,a.jsxs)("ul",{className:"space-y-3 text-blue-800",children:[(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)(h.A,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Works While You Sleep"}),(0,a.jsx)("p",{className:"text-sm mt-0.5",children:"Drafts responses 24/7, ensuring no email goes unanswered during off-hours"})]})]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)(h.A,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Perfect Tone Matching"}),(0,a.jsx)("p",{className:"text-sm mt-0.5",children:"AI learns your writing style and maintains consistent communication"})]})]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)(h.A,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Smart Prioritization"}),(0,a.jsx)("p",{className:"text-sm mt-0.5",children:"Automatically identifies urgent emails and suggests priority responses"})]})]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)(h.A,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"You're Always in Control"}),(0,a.jsx)("p",{className:"text-sm mt-0.5",children:"Review and approve every response before it's sent"})]})]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)(h.A,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Continuous Learning"}),(0,a.jsx)("p",{className:"text-sm mt-0.5",children:"AI improves from your edits and feedback over time"})]})]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)(h.A,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Context-Aware Responses"}),(0,a.jsx)("p",{className:"text-sm mt-0.5",children:"Understands email threads and conversation history for better replies"})]})]})]})]})]})]}),(0,a.jsxs)("section",{className:"space-y-4",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Get Started"}),(0,a.jsxs)("div",{className:"border rounded-lg p-6 bg-white",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium",children:"Self-Hosted Setup"}),(0,a.jsx)("span",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium",children:"FREE"})]}),(0,a.jsxs)("ul",{className:"space-y-3 mb-6 text-gray-600",children:[(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)(h.A,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),(0,a.jsx)("span",{children:"Complete control over your infrastructure"})]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)(h.A,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),(0,a.jsx)("span",{children:"DIY setup with step-by-step guidance"})]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)(h.A,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),(0,a.jsx)("span",{children:"Requires basic knowledge of database management"})]})]}),(0,a.jsxs)("div",{className:"border-t pt-4 mb-4",children:[(0,a.jsxs)("label",{className:"flex items-start gap-3 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:s,onChange:e=>{t(e.target.checked),e.target.checked&&n(!1)},className:"mt-1"}),(0,a.jsx)("span",{className:"text-gray-600 text-sm",children:"I understand this is self-hosted and I'm responsible for infrastructure costs."})]}),i&&(0,a.jsxs)("div",{className:"mt-2 flex items-center gap-2 text-red-600 text-sm",children:[(0,a.jsx)(u.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Please accept before continuing"})]})]}),(0,a.jsx)("button",{onClick:()=>{if(!s){n(!0);return}e()},className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-primary text-white rounded-lg hover:bg-primary-dark",children:"Begin Setup"})]})]}),(0,a.jsxs)("section",{className:"space-y-4",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Resources"}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("a",{href:"https://github.com/darrengalvin/email-manager",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800",children:[(0,a.jsx)(p.A,{className:"w-5 h-5"}),"View Source Code"]}),(0,a.jsxs)("a",{href:"https://github.com/darrengalvin/email-manager/wiki",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:[(0,a.jsx)(g.A,{className:"w-5 h-5"}),"Documentation"]})]})]}),(0,a.jsxs)("section",{className:"text-center pt-8 border-t",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Need Professional Setup?"}),(0,a.jsx)("div",{className:"max-w-md mx-auto",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg border p-6 mb-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsx)("h4",{className:"text-lg font-medium",children:"Managed Setup"}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"text-lg font-bold",children:"\xa31,499"}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"+ \xa325/month support"})]})]}),(0,a.jsxs)("ul",{className:"space-y-3 text-left mb-6",children:[(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)(h.A,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),(0,a.jsx)("span",{className:"text-gray-600",children:"Professional installation & configuration"})]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)(h.A,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),(0,a.jsx)("span",{className:"text-gray-600",children:"Ongoing technical support"})]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)(h.A,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),(0,a.jsx)("span",{className:"text-gray-600",children:"Custom integration assistance"})]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)(h.A,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),(0,a.jsx)("span",{className:"text-gray-600",children:"Ready within 14 working days"})]})]}),(0,a.jsx)("a",{href:"mailto:contact@darrengalvin.com?subject=Smart Email Manager - Managed Setup",className:"block w-full text-center px-6 py-3 bg-gray-900 text-white rounded-lg hover:bg-gray-800",children:"Contact for Managed Setup"})]})})]})]})}},R=[{id:"database-connection",title:"Database Connection",description:"Connect to your Supabase project",icon:l.A,component:function({onComplete:e}){let[s,t]=(0,r.useState)({url:"",key:""}),[i,n]=(0,r.useState)(!1),[c,o]=(0,r.useState)(null),d=async()=>{if(!s.url||!s.key){o("Please provide both URL and API key");return}n(!0),o(null);try{localStorage.setItem("SUPABASE_URL",s.url),localStorage.setItem("SUPABASE_KEY",s.key);let t=(0,b.U)();if(!t)throw Error("Failed to initialize Supabase client");let{error:a}=await t.auth.getUser();if(a)throw Error("Failed to connect to Supabase");e()}catch(e){o(e instanceof Error?e.message:"Failed to connect to Supabase")}finally{n(!1)}};return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 pb-6 border-b",children:[(0,a.jsx)(l.A,{className:"w-8 h-8 text-primary"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Database Connection"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Connect to your Supabase project"})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-blue-50 p-6 rounded-lg",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-blue-900 mb-2",children:"Getting Started"}),(0,a.jsxs)("ol",{className:"space-y-3 text-blue-700",children:[(0,a.jsxs)("li",{children:["1. Create a new project at ",(0,a.jsx)("a",{href:"https://supabase.com",target:"_blank",rel:"noopener noreferrer",className:"underline",children:"supabase.com"})]}),(0,a.jsx)("li",{children:"2. Go to Project Settings → API"}),(0,a.jsx)("li",{children:"3. Copy your Project URL and anon/public key below"})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Project URL"}),(0,a.jsx)("input",{type:"url",value:s.url,onChange:e=>t(s=>({...s,url:e.target.value})),placeholder:"https://your-project.supabase.co",className:"w-full rounded-md"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"API Key (anon/public)"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"password",value:s.key,onChange:e=>t(s=>({...s,key:e.target.value})),placeholder:"your-anon-key",className:"flex-1 rounded-md"}),(0,a.jsx)("button",{className:"p-2 text-gray-400 hover:text-gray-600",children:(0,a.jsx)(f.A,{className:"w-5 h-5"})})]})]})]}),c&&(0,a.jsxs)("div",{className:"flex items-center gap-2 p-4 bg-red-50 text-red-600 rounded-lg",children:[(0,a.jsx)(j.A,{className:"w-5 h-5 flex-shrink-0"}),(0,a.jsx)("p",{children:c})]}),(0,a.jsx)("button",{onClick:d,disabled:i||!s.url||!s.key,className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-primary text-white rounded-lg hover:bg-primary-dark disabled:opacity-50",children:i?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(y.A,{className:"w-5 h-5 animate-spin"}),"Connecting..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.A,{className:"w-5 h-5"}),"Connect to Supabase"]})})]})]})}},{id:"table-setup",title:"Table Setup",description:"Create and verify required database tables",icon:c.A,component:function({onComplete:e}){let[s,t]=(0,r.useState)(null),[i,n]=(0,r.useState)(v),c=async s=>{n(e=>e.map(e=>e.name===s?{...e,checking:!0,error:void 0}:e));let t=await k(s);n(e=>e.map(e=>e.name===s?{...e,exists:t,checking:!1,error:t?void 0:`Table ${s} not found or inaccessible`}:e)),i.every(e=>e.name===s?t:e.exists)&&e()};return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 pb-6 border-b",children:[(0,a.jsx)(l.A,{className:"w-8 h-8 text-primary"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Table Setup"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Verify required database tables"})]})]}),(0,a.jsxs)("div",{className:"bg-blue-50 rounded-lg p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-blue-900 mb-4",children:"Database Structure"}),(0,a.jsx)(N,{tables:i,onRetry:c})]}),s&&(0,a.jsxs)("div",{className:"flex items-center gap-2 p-4 bg-red-50 text-red-600 rounded-lg",children:[(0,a.jsx)(j.A,{className:"w-5 h-5 flex-shrink-0"}),(0,a.jsx)("p",{children:s})]})]})}},{id:"dummy-data",title:"Sample Data",description:"Install sample data to explore the system",icon:o,component:function({onComplete:e}){let[s,t]=(0,r.useState)(!1),[i,n]=(0,r.useState)(null),[l,c]=(0,r.useState)({}),d=async()=>{t(!0),n(null);try{let s=(0,b.U)();if(!s)throw Error("Failed to initialize Supabase client");let{data:t,error:a}=await s.from("emails").insert(S.u.map(e=>({...e,created_at:new Date().toISOString()})));if(a)throw a;let{data:r,error:i}=await s.from("email_categories").insert([{name:"Work",color:"#0284c7",description:"Work-related emails"},{name:"Personal",color:"#059669",description:"Personal communications"},{name:"Important",color:"#dc2626",description:"High priority emails"},{name:"Follow-up",color:"#f59e0b",description:"Emails requiring follow-up"}]);if(i)throw i;c({emails:t?.length||0,categories:r?.length||0}),e()}catch(e){n(e instanceof Error?e.message:"Failed to install dummy data")}finally{t(!1)}};return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 pb-6 border-b",children:[(0,a.jsx)(o,{className:"w-8 h-8 text-primary"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Sample Data"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Install sample data to explore the system"})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-blue-50 p-6 rounded-lg",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-blue-900 mb-2",children:"What's Included"}),(0,a.jsxs)("ul",{className:"space-y-2 text-blue-700",children:[(0,a.jsx)("li",{children:"• Sample emails with different priorities and statuses"}),(0,a.jsx)("li",{children:"• Pre-configured email categories"}),(0,a.jsx)("li",{children:"• Example AI suggestions and responses"}),(0,a.jsx)("li",{children:"• Demonstration of email threading"})]})]}),Object.keys(l).length>0&&(0,a.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-green-700",children:[(0,a.jsx)(h.A,{className:"w-5 h-5"}),(0,a.jsx)("h4",{className:"font-medium",children:"Installation Complete"})]}),(0,a.jsxs)("ul",{className:"mt-2 space-y-1 text-sm text-green-600",children:[l.emails&&(0,a.jsxs)("li",{children:["• ",l.emails," sample emails installed"]}),l.categories&&(0,a.jsxs)("li",{children:["• ",l.categories," email categories created"]})]})]}),i&&(0,a.jsxs)("div",{className:"flex items-center gap-2 p-4 bg-red-50 text-red-600 rounded-lg",children:[(0,a.jsx)(j.A,{className:"w-5 h-5 flex-shrink-0"}),(0,a.jsx)("p",{children:i})]}),(0,a.jsx)("button",{onClick:d,disabled:s||Object.keys(l).length>0,className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-primary text-white rounded-lg hover:bg-primary-dark disabled:opacity-50",children:s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(y.A,{className:"w-5 h-5 animate-spin"}),"Installing..."]}):Object.keys(l).length>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.A,{className:"w-5 h-5"}),"Installation Complete"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o,{className:"w-5 h-5"}),"Install Sample Data"]})})]})]})}},{id:"email",title:"Email Connection",description:"Connect your email account",icon:d.A,component:function({onComplete:e}){let[s,t]=(0,r.useState)(!1),i=async()=>{try{t(!0),await (0,M.h)(),e()}catch(e){console.error("Failed to connect Microsoft account:",e)}finally{t(!1)}};return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 pb-6 border-b",children:[(0,a.jsx)(d.A,{className:"w-8 h-8 text-primary"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Connect Your Email"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Choose your email provider to get started"})]})]}),(0,a.jsxs)("div",{className:"grid gap-8",children:[(0,a.jsxs)("div",{className:"bg-green-50 rounded-lg p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-green-900 mb-4",children:"Your Data Privacy & Security"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(A.A,{className:"w-5 h-5 text-green-600 mt-1"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-green-900",children:"Secure Connection"}),(0,a.jsx)("p",{className:"text-green-700",children:"We only request necessary permissions to manage your emails"})]})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(C.A,{className:"w-5 h-5 text-green-600 mt-1"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-green-900",children:"AI Assistant"}),(0,a.jsx)("p",{className:"text-green-700",children:"Our AI will help manage your emails but you maintain full control"})]})]})]})]}),(0,a.jsxs)("div",{className:"grid gap-4",children:[(0,a.jsxs)("button",{onClick:i,disabled:s,className:"flex items-center gap-4 p-4 bg-[#f3f6fc] hover:bg-[#e9ecf5] rounded-lg group transition-colors",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-[#05a6f0] rounded-lg flex items-center justify-center group-hover:scale-105 transition-transform",children:s?(0,a.jsx)(P.A,{className:"w-6 h-6 text-white animate-spin"}):(0,a.jsx)(I.u,{className:"w-6 h-6 text-white"})}),(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900",children:"Microsoft 365"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Connect Outlook or Office 365 account"})]})]}),(0,a.jsxs)("button",{disabled:!0,className:"flex items-center gap-4 p-4 bg-gray-50 rounded-lg opacity-50 cursor-not-allowed",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-white border border-gray-200 rounded-lg flex items-center justify-center",children:(0,a.jsx)(d.A,{className:"w-6 h-6 text-gray-400"})}),(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900",children:"Gmail"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Coming soon"})]})]})]})]})]})}},{id:"branding",title:"Company Branding",description:"Customize the appearance",icon:m.A,component:function({onComplete:e}){let[s,t]=(0,r.useState)(""),[i,n]=(0,r.useState)("#014380"),[l,c]=(0,r.useState)(!1),[o,d]=(0,r.useState)(null),[x,u]=(0,r.useState)(null),p=async e=>{let t=e.target.files?.[0];if(t){if(t.size>2097152){d("Logo file must be smaller than 2MB");return}if(!t.type.startsWith("image/")){d("Please upload an image file");return}c(!0),d(null);try{let{url:e}=await _("logos",t,{path:`${Date.now()}-${t.name}`,upsert:!0}),a=(0,b.U)();if(!a)throw Error("Supabase client not initialized");let{error:r}=await a.from("user_settings").upsert({branding:{logoUrl:e,primaryColor:i,companyName:s}});if(r)throw r;u(e)}catch(e){d(e instanceof Error?e.message:"Failed to upload logo")}finally{c(!1)}}},g=async()=>{try{let t=(0,b.U)();if(!t)throw Error("Supabase client not initialized");let{error:a}=await t.from("user_settings").upsert({branding:{logoUrl:x,primaryColor:i,companyName:s}});if(a)throw a;e()}catch(e){d(e instanceof Error?e.message:"Failed to save branding settings")}};return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 pb-6 border-b",children:[(0,a.jsx)(m.A,{className:"w-8 h-8 text-primary"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Company Branding"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Customize your email management experience"})]})]}),(0,a.jsxs)("div",{className:"grid gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Name"}),(0,a.jsx)("input",{type:"text",value:s,onChange:e=>t(e.target.value),className:"w-full rounded-md",placeholder:"Enter your company name"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Brand Color"}),(0,a.jsx)("input",{type:"color",value:i,onChange:e=>n(e.target.value),className:"h-10 w-20 rounded-md cursor-pointer"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company Logo"}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-16 h-16 border rounded-lg flex items-center justify-center bg-gray-50",children:x?(0,a.jsx)("img",{src:x,alt:"Logo",className:"max-w-full max-h-full object-contain"}):(0,a.jsx)(E.A,{className:"w-6 h-6 text-gray-400"})}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsxs)("label",{className:"cursor-pointer",children:[(0,a.jsx)("input",{type:"file",className:"hidden",accept:"image/*",onChange:p,disabled:l}),(0,a.jsx)("span",{className:`inline-flex items-center gap-2 px-4 py-2 ${l?"bg-gray-100 text-gray-400":"bg-primary text-white hover:bg-primary-dark"} rounded-md transition-colors`,children:l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(P.A,{className:"w-4 h-4 animate-spin"})," Uploading..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(E.A,{className:"w-4 h-4"})," Upload Logo"]})})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Maximum file size: 2MB. Supported formats: PNG, JPG, SVG"})]})]})]}),o&&(0,a.jsxs)("div",{className:"flex items-center gap-2 p-4 bg-red-50 text-red-600 rounded-lg",children:[(0,a.jsx)(j.A,{className:"w-5 h-5 flex-shrink-0"}),(0,a.jsx)("p",{children:o})]}),(0,a.jsx)("div",{className:"pt-4",children:(0,a.jsxs)("button",{onClick:g,className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-primary text-white rounded-lg hover:bg-primary-dark",children:[(0,a.jsx)(h.A,{className:"w-5 h-5"}),"Complete Setup"]})})]})]})}}],q=[U,...R],z=(0,r.createContext)(null);function D({children:e}){let[s,t]=(0,r.useState)(q[0].id),[i,n]=(0,r.useState)([]);return(0,a.jsx)(z.Provider,{value:{currentStep:s,completedSteps:i,completeStep:e=>{n(s=>s.includes(e)?s:[...s,e]);let s=q.findIndex(s=>s.id===e);s<q.length-1&&t(q[s+1].id)},goToStep:e=>{t(e)}},children:e})}var F=t(9334),B=t(5668),G=t(5907);function $({steps:e,currentStep:s,completedSteps:t,onStepClick:r}){return(0,a.jsx)("div",{className:"grid gap-4",children:e.map((i,n)=>{let l=i.icon,c=i.id===s,o=t.includes(i.id),d=o||t.includes(e[n-1]?.id);return(0,a.jsxs)("button",{onClick:()=>d&&r(i.id),disabled:!d,className:`relative flex items-start gap-4 p-4 rounded-lg transition-all text-left ${c?"bg-blue-50 ring-1 ring-blue-100 scale-102":o?"bg-green-50":"bg-gray-50"} ${d?"cursor-pointer hover:ring-1 hover:ring-gray-200":"cursor-not-allowed opacity-50"}`,children:[n<e.length-1&&(0,a.jsx)("div",{className:`absolute left-7 top-12 bottom-0 w-0.5 ${o?"bg-green-200":"bg-gray-200"}`}),(0,a.jsx)("div",{className:`relative z-10 p-2 rounded-full transition-colors ${c?"bg-blue-100 text-blue-600 ring-4 ring-blue-50":o?"bg-green-100 text-green-600":"bg-gray-100 text-gray-400"}`,children:(0,a.jsx)(l,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("h3",{className:`font-medium ${c?"text-blue-900":o?"text-green-900":"text-gray-900"}`,children:i.title}),!o&&!c&&(0,a.jsx)("span",{className:"text-xs px-2 py-0.5 bg-gray-100 text-gray-600 rounded-full",children:d?"Ready":"Locked"})]}),(0,a.jsx)("p",{className:`text-sm mt-1 ${c?"text-blue-600":o?"text-green-600":"text-gray-500"}`,children:i.description})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[o&&(0,a.jsx)("span",{className:"text-sm font-medium text-green-600",children:"Completed"}),c&&(0,a.jsx)("span",{className:"text-sm font-medium text-blue-600 animate-pulse",children:"In Progress"})]})]},i.id)})})}function L(){let e=(0,F.useRouter)(),{currentStep:s,completedSteps:t,completeStep:i,goToStep:n}=function(){let e=(0,r.useContext)(z);if(!e)throw Error("useSetup must be used within a SetupProvider");return e}(),[l,c]=(0,r.useState)(!0),o=q.find(e=>e.id===s)?.component,d=q.findIndex(e=>e.id===s),m=1===d,x=d===q.length-1,h=s===U.id,p=async s=>{if(i(s),s===U.id){n(R[0].id);return}if(s===q[q.length-1].id)try{let s=(0,b.U)();if(!s)throw Error("Supabase client not initialized");await s.from("user_settings").upsert({setup_completed:!0,setup_completed_at:new Date().toISOString()}),c(!1),e.refresh()}catch(e){console.error("Failed to mark setup as complete:",e)}};return l?(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),(0,a.jsx)("div",{className:"relative w-full max-h-[90vh] overflow-y-auto",children:(0,a.jsxs)("div",{className:"relative max-w-4xl mx-auto bg-white rounded-xl shadow-xl",children:[(0,a.jsx)("div",{className:"absolute top-4 right-4 z-10",children:(0,a.jsx)("button",{onClick:()=>c(!1),className:"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",children:(0,a.jsx)(u.A,{className:"w-6 h-6"})})}),(0,a.jsxs)("div",{className:"px-8 py-12",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-8",children:[(0,a.jsx)(C.A,{className:"w-10 h-10 text-primary"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:h?"Welcome to Smart Email Manager":"Smart Email Manager Setup"}),(0,a.jsx)("p",{className:"text-gray-600",children:h?"Your self-hosted AI email assistant":"Complete these steps to get started with your email assistant"})]})]}),(0,a.jsxs)("div",{className:h?"":"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[(0,a.jsxs)("div",{className:h?"w-full":"lg:col-span-3",children:[(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-8",children:o&&(0,a.jsx)(o,{onComplete:()=>p(s)})}),!h&&(0,a.jsxs)("div",{className:"flex justify-between mt-6",children:[(0,a.jsxs)("button",{onClick:()=>{if(!m){let e=d-1;q[e].id!==U.id&&n(q[e].id)}},disabled:m,className:"flex items-center gap-2 px-4 py-2 text-gray-600 hover:text-gray-900 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,a.jsx)(B.A,{className:"w-4 h-4"}),"Previous"]}),(0,a.jsxs)("button",{onClick:()=>{x||n(q[d+1].id)},disabled:x||!t.includes(s),className:"flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-md hover:bg-primary-dark disabled:opacity-50 disabled:cursor-not-allowed",children:["Next",(0,a.jsx)(G.A,{className:"w-4 h-4"})]})]})]}),!h&&(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsx)("div",{className:"sticky top-6",children:(0,a.jsx)($,{steps:R,currentStep:s,completedSteps:t,onStepClick:n})})})]})]})]})})]}):null}function T(){return(0,a.jsx)(D,{children:(0,a.jsx)(L,{})})}},9968:(e,s,t)=>{"use strict";t.d(s,{h:()=>r});var a=t(2676);async function r(){let e=(0,a.U)();if(!e)throw Error("Failed to initialize Supabase client");return e.auth.signInWithOAuth({provider:"azure",options:{scopes:"email offline_access Mail.Read Mail.Send User.Read",redirectTo:`${window.location.origin}/auth/callback`,skipBrowserRedirect:!0}}).then(({data:e,error:s})=>{if(s)throw s;if(!e?.url)throw Error("No OAuth URL returned");let t=window.open(e.url,"microsoft-oauth","width=600,height=800,left=200,top=100");return new Promise((s,a)=>{let r=setInterval(()=>{try{t?.closed&&(clearInterval(r),a(Error("Authentication cancelled"))),t?.location?.hostname===window.location.hostname&&(clearInterval(r),t.close(),s(e))}catch(e){t?.closed&&(clearInterval(r),a(Error("Authentication cancelled")))}},500);setTimeout(()=>{clearInterval(r),t?.close(),a(Error("Authentication timeout"))},3e5)})})}},864:(e,s,t)=>{"use strict";t.d(s,{Q:()=>a,u:()=>r});let a={id:"1",subject:"Urgent: Q4 Budget Review Meeting",messages:[{id:"msg1",from:"sarah.finance@company.com",to:["team@company.com"],subject:"Urgent: Q4 Budget Review Meeting",body:`Hi Team,

I hope this email finds you well. We need to schedule an urgent meeting to review the Q4 budget projections. Our preliminary analysis shows some concerning trends that require immediate attention.

Key points for discussion:
- Revenue forecast adjustments
- Unexpected cost increases in Q3
- Impact on year-end targets
- Mitigation strategies

Please let me know your availability for tomorrow or Wednesday.

Best regards,
Sarah`,timestamp:new Date("2024-01-04T09:00:00"),status:"sent",attachments:[{id:"1",name:"Q4_Budget_Review.xlsx",size:2048576},{id:"2",name:"Financial_Summary.pdf",size:1048576}]},{id:"msg2",from:"john.manager@company.com",to:["sarah.finance@company.com","team@company.com"],subject:"Re: Urgent: Q4 Budget Review Meeting",body:`Thanks for flagging this, Sarah.

I can make myself available tomorrow at 2 PM EST. The cost increases are indeed concerning, and I've already started gathering some data on the main contributors.

I'll prepare a brief overview of the operational impacts for the meeting.

Best,
John`,timestamp:new Date("2024-01-04T09:45:00"),status:"sent"}]},r=[{id:"1",subject:"Urgent: Q4 Budget Review Meeting",from:"sarah.finance@company.com",to:["user@example.com"],body:a.messages[0].body,attachments:a.messages[0].attachments,timestamp:new Date,status:"ai_pending",aiMetadata:{sentiment:"negative",priority:"high",category:"finance"},aiSuggestion:{id:"sugg1",body:`Dear Sarah,

Thank you for raising these concerns about the Q4 budget. I understand the urgency and can make myself available tomorrow at 2 PM for the review meeting.

I've already reviewed the preliminary numbers and agree that we need to address these trends promptly. I'll prepare some initial mitigation proposals for discussion.

Would tomorrow at 2 PM work for you?

Best regards,
[Your name]`,confidence:.92,reasoning:"Response prioritizes urgency while maintaining professional tone"}}]},4611:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>n,metadata:()=>i});var a=t(2740),r=t(3274);let i={title:"Setup | Smart Email Manager",description:"Set up your Smart Email Manager system"};function n(){return(0,a.jsx)(r.SetupGuide,{})}},3274:(e,s,t)=>{"use strict";t.d(s,{SetupGuide:()=>a});let a=(0,t(6760).registerClientReference)(function(){throw Error("Attempted to call SetupGuide() from the server but SetupGuide is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/darrengalvin/Downloads/email connector/src/components/setup/SetupGuide.tsx","SetupGuide")}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[638,806,150],()=>t(2953));module.exports=a})();
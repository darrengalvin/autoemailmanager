(()=>{var e={};e.id=620,e.ids=[620],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},9428:e=>{"use strict";e.exports=require("buffer")},5511:e=>{"use strict";e.exports=require("crypto")},4735:e=>{"use strict";e.exports=require("events")},1630:e=>{"use strict";e.exports=require("http")},5591:e=>{"use strict";e.exports=require("https")},1645:e=>{"use strict";e.exports=require("net")},3873:e=>{"use strict";e.exports=require("path")},1997:e=>{"use strict";e.exports=require("punycode")},7910:e=>{"use strict";e.exports=require("stream")},4631:e=>{"use strict";e.exports=require("tls")},9551:e=>{"use strict";e.exports=require("url")},4075:e=>{"use strict";e.exports=require("zlib")},2953:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,pages:()=>d,routeModule:()=>u,tree:()=>c});var a=s(260),r=s(8203),i=s(5155),n=s.n(i),l=s(7292),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let c=["",{children:["setup",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,4611)),"/Users/darrengalvin/Downloads/email connector/src/app/setup/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,2126)),"/Users/darrengalvin/Downloads/email connector/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,9116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,1485,23)),"next/dist/client/components/unauthorized-error"]}],d=["/Users/darrengalvin/Downloads/email connector/src/app/setup/page.tsx"],m={require:s,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/setup/page",pathname:"/setup",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},4570:(e,t,s)=>{Promise.resolve().then(s.bind(s,3274))},8850:(e,t,s)=>{Promise.resolve().then(s.bind(s,542))},236:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(3258).A)("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]])},4849:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(3258).A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},8976:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(3258).A)("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]])},8458:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(3258).A)("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]])},4949:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(3258).A)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},2734:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(3258).A)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},142:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(3258).A)("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]])},2557:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(3258).A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},8261:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(3258).A)("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]])},2744:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(3258).A)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},6509:(e,t,s)=>{"use strict";s.d(t,{u:()=>r});var a=s(5512);function r({className:e="w-6 h-6"}){return(0,a.jsxs)("svg",{className:e,viewBox:"0 0 23 23",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{fill:"currentColor",d:"M0 0h11v11H0z"}),(0,a.jsx)("path",{fill:"currentColor",d:"M12 0h11v11H12z"}),(0,a.jsx)("path",{fill:"currentColor",d:"M0 12h11v11H0z"}),(0,a.jsx)("path",{fill:"currentColor",d:"M12 12h11v11H12z"})]})}},542:(e,t,s)=>{"use strict";s.d(t,{SetupGuide:()=>U});var a=s(5512),r=s(8009),i=s(8976),n=s(8261),l=s(3258);let o=(0,l.A)("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);var c=s(8866),d=s(142),m=s(8458),u=s(4432),p=s(2557),x=s(4849),h=s(2676);function g({tables:e,onRetry:t}){return(0,a.jsx)("div",{className:"grid gap-3",children:e.map(e=>(0,a.jsxs)("div",{className:`flex items-center gap-3 p-3 rounded-lg ${e.checking?"bg-blue-100 ring-2 ring-blue-200":e.exists?"bg-green-50":e.error?"bg-red-50":"bg-white/60"}`,children:[(0,a.jsx)(n.A,{className:`w-5 h-5 ${e.checking?"text-blue-600":e.exists?"text-green-600":e.error?"text-red-500":"text-gray-400"}`}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.description}),e.error&&(0,a.jsx)("p",{className:"text-sm text-red-600 mt-1",children:e.error})]}),e.checking?(0,a.jsx)(p.A,{className:"w-4 h-4 text-blue-600 animate-spin"}):e.exists?(0,a.jsx)(x.A,{className:"w-4 h-4 text-green-600"}):(0,a.jsx)("button",{onClick:()=>t(e.name),className:"px-2 py-1 text-xs bg-red-100 text-red-600 rounded hover:bg-red-200",children:"Retry"})]},e.name))})}let y=[{name:"users",description:"User profiles and settings",exists:!1,checking:!1},{name:"emails",description:"Email data and metadata",exists:!1,checking:!1},{name:"email_threads",description:"Email conversation threads",exists:!1,checking:!1},{name:"ai_suggestions",description:"AI-generated email responses",exists:!1,checking:!1},{name:"email_categories",description:"Custom email categorization",exists:!1,checking:!1},{name:"token_usage",description:"AI token usage tracking",exists:!1,checking:!1}];var f=s(282);async function b(e){try{let t=(0,h.U)();if(!t)throw Error("Could not create Supabase client");let s=(await t.from(e).select("count",{count:"exact",head:!0}).single()).error;return!s||s.message.includes("permission denied")}catch(t){return f.v.error(`Failed to verify table ${e}:`,t),!1}}var j=s(864),v=s(2734),N=s(236),w=s(6509),k=s(2744),S=s(4949);async function A(e,t,s){try{let a=(0,h.U)();if(!a)throw Error("Could not initialize Supabase client");let{error:r}=await a.storage.createBucket(e,{public:!0,fileSizeLimit:5242880});if(r&&!r.message.includes("already exists"))throw r;let i=s?.path||`${Date.now()}-${t.name}`,{data:n,error:l}=await a.storage.from(e).upload(i,t,{cacheControl:s?.cacheControl||"3600",upsert:s?.upsert??!1});if(l)throw l;let{data:{publicUrl:o}}=a.storage.from(e).getPublicUrl(n?.path||i);return{path:n?.path||i,url:o}}catch(e){return f.v.error("File upload failed:",e),{path:`mock/${Date.now()}-${t.name}`,url:"https://via.placeholder.com/150"}}}let C=[{id:"database-connection",title:"Database Connection",description:"Connect to your Supabase project",icon:i.A,component:function({onComplete:e}){let[t,s]=(0,r.useState)({url:"",key:""}),[n,l]=(0,r.useState)(!1),[o,c]=(0,r.useState)(null),d=async()=>{if(!t.url||!t.key){c("Please provide both URL and API key");return}l(!0),c(null);try{localStorage.setItem("SUPABASE_URL",t.url),localStorage.setItem("SUPABASE_KEY",t.key);let s=(0,h.U)();if(!s)throw Error("Failed to initialize Supabase client");let{error:a}=await s.auth.getUser();if(a)throw Error("Failed to connect to Supabase");e()}catch(e){c(e instanceof Error?e.message:"Failed to connect to Supabase")}finally{l(!1)}};return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 pb-6 border-b",children:[(0,a.jsx)(i.A,{className:"w-8 h-8 text-primary"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Database Connection"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Connect to your Supabase project"})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-blue-50 p-6 rounded-lg",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-blue-900 mb-2",children:"Getting Started"}),(0,a.jsxs)("ol",{className:"space-y-3 text-blue-700",children:[(0,a.jsxs)("li",{children:["1. Create a new project at ",(0,a.jsx)("a",{href:"https://supabase.com",target:"_blank",rel:"noopener noreferrer",className:"underline",children:"supabase.com"})]}),(0,a.jsx)("li",{children:"2. Go to Project Settings → API"}),(0,a.jsx)("li",{children:"3. Copy your Project URL and anon/public key below"})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Project URL"}),(0,a.jsx)("input",{type:"url",value:t.url,onChange:e=>s(t=>({...t,url:e.target.value})),placeholder:"https://your-project.supabase.co",className:"w-full rounded-md"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"API Key (anon/public)"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"password",value:t.key,onChange:e=>s(t=>({...t,key:e.target.value})),placeholder:"your-anon-key",className:"flex-1 rounded-md"}),(0,a.jsx)("button",{className:"p-2 text-gray-400 hover:text-gray-600",children:(0,a.jsx)(m.A,{className:"w-5 h-5"})})]})]})]}),o&&(0,a.jsxs)("div",{className:"flex items-center gap-2 p-4 bg-red-50 text-red-600 rounded-lg",children:[(0,a.jsx)(u.A,{className:"w-5 h-5 flex-shrink-0"}),(0,a.jsx)("p",{children:o})]}),(0,a.jsx)("button",{onClick:d,disabled:n||!t.url||!t.key,className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-primary text-white rounded-lg hover:bg-primary-dark disabled:opacity-50",children:n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p.A,{className:"w-5 h-5 animate-spin"}),"Connecting..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.A,{className:"w-5 h-5"}),"Connect to Supabase"]})})]})]})}},{id:"table-setup",title:"Table Setup",description:"Create and verify required database tables",icon:n.A,component:function({onComplete:e}){let[t,s]=(0,r.useState)(null),[n,l]=(0,r.useState)(y),o=async t=>{l(e=>e.map(e=>e.name===t?{...e,checking:!0,error:void 0}:e));let s=await b(t);l(e=>e.map(e=>e.name===t?{...e,exists:s,checking:!1,error:s?void 0:`Table ${t} not found or inaccessible`}:e)),n.every(e=>e.name===t?s:e.exists)&&e()};return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 pb-6 border-b",children:[(0,a.jsx)(i.A,{className:"w-8 h-8 text-primary"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Table Setup"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Verify required database tables"})]})]}),(0,a.jsxs)("div",{className:"bg-blue-50 rounded-lg p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-blue-900 mb-4",children:"Database Structure"}),(0,a.jsx)(g,{tables:n,onRetry:o})]}),t&&(0,a.jsxs)("div",{className:"flex items-center gap-2 p-4 bg-red-50 text-red-600 rounded-lg",children:[(0,a.jsx)(u.A,{className:"w-5 h-5 flex-shrink-0"}),(0,a.jsx)("p",{children:t})]})]})}},{id:"dummy-data",title:"Sample Data",description:"Install sample data to explore the system",icon:o,component:function({onComplete:e}){let[t,s]=(0,r.useState)(!1),[i,n]=(0,r.useState)(null),[l,c]=(0,r.useState)({}),d=async()=>{s(!0),n(null);try{let t=(0,h.U)();if(!t)throw Error("Failed to initialize Supabase client");let{data:s,error:a}=await t.from("emails").insert(j.u.map(e=>({...e,created_at:new Date().toISOString()})));if(a)throw a;let{data:r,error:i}=await t.from("email_categories").insert([{name:"Work",color:"#0284c7",description:"Work-related emails"},{name:"Personal",color:"#059669",description:"Personal communications"},{name:"Important",color:"#dc2626",description:"High priority emails"},{name:"Follow-up",color:"#f59e0b",description:"Emails requiring follow-up"}]);if(i)throw i;c({emails:s?.length||0,categories:r?.length||0}),e()}catch(e){n(e instanceof Error?e.message:"Failed to install dummy data")}finally{s(!1)}};return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 pb-6 border-b",children:[(0,a.jsx)(o,{className:"w-8 h-8 text-primary"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Sample Data"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Install sample data to explore the system"})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-blue-50 p-6 rounded-lg",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-blue-900 mb-2",children:"What's Included"}),(0,a.jsxs)("ul",{className:"space-y-2 text-blue-700",children:[(0,a.jsx)("li",{children:"• Sample emails with different priorities and statuses"}),(0,a.jsx)("li",{children:"• Pre-configured email categories"}),(0,a.jsx)("li",{children:"• Example AI suggestions and responses"}),(0,a.jsx)("li",{children:"• Demonstration of email threading"})]})]}),Object.keys(l).length>0&&(0,a.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-green-700",children:[(0,a.jsx)(x.A,{className:"w-5 h-5"}),(0,a.jsx)("h4",{className:"font-medium",children:"Installation Complete"})]}),(0,a.jsxs)("ul",{className:"mt-2 space-y-1 text-sm text-green-600",children:[l.emails&&(0,a.jsxs)("li",{children:["• ",l.emails," sample emails installed"]}),l.categories&&(0,a.jsxs)("li",{children:["• ",l.categories," email categories created"]})]})]}),i&&(0,a.jsxs)("div",{className:"flex items-center gap-2 p-4 bg-red-50 text-red-600 rounded-lg",children:[(0,a.jsx)(u.A,{className:"w-5 h-5 flex-shrink-0"}),(0,a.jsx)("p",{children:i})]}),(0,a.jsx)("button",{onClick:d,disabled:t||Object.keys(l).length>0,className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-primary text-white rounded-lg hover:bg-primary-dark disabled:opacity-50",children:t?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p.A,{className:"w-5 h-5 animate-spin"}),"Installing..."]}):Object.keys(l).length>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.A,{className:"w-5 h-5"}),"Installation Complete"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o,{className:"w-5 h-5"}),"Install Sample Data"]})})]})]})}},{id:"email",title:"Email Connection",description:"Connect your email account",icon:c.A,component:function({onComplete:e}){let[t,s]=(0,r.useState)(!1);return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 pb-6 border-b",children:[(0,a.jsx)(c.A,{className:"w-8 h-8 text-primary"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Connect Your Email"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Choose your email provider to get started"})]})]}),(0,a.jsxs)("div",{className:"grid gap-8",children:[(0,a.jsxs)("div",{className:"bg-green-50 rounded-lg p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-green-900 mb-4",children:"Your Data Privacy & Security"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(v.A,{className:"w-5 h-5 text-green-600 mt-1"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-green-900",children:"Secure Connection"}),(0,a.jsx)("p",{className:"text-green-700",children:"We only request necessary permissions to manage your emails"})]})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(N.A,{className:"w-5 h-5 text-green-600 mt-1"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-green-900",children:"AI Assistant"}),(0,a.jsx)("p",{className:"text-green-700",children:"Our AI will help manage your emails but you maintain full control"})]})]})]})]}),(0,a.jsxs)("div",{className:"grid gap-4",children:[(0,a.jsxs)("button",{onClick:()=>{s(!0),setTimeout(()=>{s(!1),e()},1500)},disabled:t,className:"flex items-center gap-4 p-4 bg-[#f3f6fc] hover:bg-[#e9ecf5] rounded-lg group transition-colors",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-[#05a6f0] rounded-lg flex items-center justify-center group-hover:scale-105 transition-transform",children:(0,a.jsx)(w.u,{className:"w-6 h-6 text-white"})}),(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900",children:"Microsoft 365"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Connect Outlook or Office 365 account"})]})]}),(0,a.jsxs)("button",{disabled:!0,className:"flex items-center gap-4 p-4 bg-gray-50 rounded-lg opacity-50 cursor-not-allowed",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-white border border-gray-200 rounded-lg flex items-center justify-center",children:(0,a.jsx)(c.A,{className:"w-6 h-6 text-gray-400"})}),(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900",children:"Gmail"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Coming soon"})]})]})]})]})]})}},{id:"branding",title:"Company Branding",description:"Customize the appearance",icon:d.A,component:function({onComplete:e}){let[t,s]=(0,r.useState)(""),[i,n]=(0,r.useState)("#014380"),[l,o]=(0,r.useState)(!1),[c,m]=(0,r.useState)(null),[p,g]=(0,r.useState)(null),y=async e=>{let s=e.target.files?.[0];if(s){if(s.size>2097152){m("Logo file must be smaller than 2MB");return}if(!s.type.startsWith("image/")){m("Please upload an image file");return}o(!0),m(null);try{let{url:e}=await A("logos",s,{path:`${Date.now()}-${s.name}`,upsert:!0}),a=(0,h.U)();if(!a)throw Error("Supabase client not initialized");let{error:r}=await a.from("user_settings").upsert({branding:{logoUrl:e,primaryColor:i,companyName:t}});if(r)throw r;g(e)}catch(e){m(e instanceof Error?e.message:"Failed to upload logo")}finally{o(!1)}}},f=async()=>{try{let s=(0,h.U)();if(!s)throw Error("Supabase client not initialized");let{error:a}=await s.from("user_settings").upsert({branding:{logoUrl:p,primaryColor:i,companyName:t}});if(a)throw a;e()}catch(e){m(e instanceof Error?e.message:"Failed to save branding settings")}};return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 pb-6 border-b",children:[(0,a.jsx)(d.A,{className:"w-8 h-8 text-primary"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Company Branding"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Customize your email management experience"})]})]}),(0,a.jsxs)("div",{className:"grid gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Name"}),(0,a.jsx)("input",{type:"text",value:t,onChange:e=>s(e.target.value),className:"w-full rounded-md",placeholder:"Enter your company name"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Brand Color"}),(0,a.jsx)("input",{type:"color",value:i,onChange:e=>n(e.target.value),className:"h-10 w-20 rounded-md cursor-pointer"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company Logo"}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-16 h-16 border rounded-lg flex items-center justify-center bg-gray-50",children:p?(0,a.jsx)("img",{src:p,alt:"Logo",className:"max-w-full max-h-full object-contain"}):(0,a.jsx)(k.A,{className:"w-6 h-6 text-gray-400"})}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsxs)("label",{className:"cursor-pointer",children:[(0,a.jsx)("input",{type:"file",className:"hidden",accept:"image/*",onChange:y,disabled:l}),(0,a.jsx)("span",{className:`inline-flex items-center gap-2 px-4 py-2 ${l?"bg-gray-100 text-gray-400":"bg-primary text-white hover:bg-primary-dark"} rounded-md transition-colors`,children:l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(S.A,{className:"w-4 h-4 animate-spin"})," Uploading..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(k.A,{className:"w-4 h-4"})," Upload Logo"]})})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Maximum file size: 2MB. Supported formats: PNG, JPG, SVG"})]})]})]}),c&&(0,a.jsxs)("div",{className:"flex items-center gap-2 p-4 bg-red-50 text-red-600 rounded-lg",children:[(0,a.jsx)(u.A,{className:"w-5 h-5 flex-shrink-0"}),(0,a.jsx)("p",{children:c})]}),(0,a.jsx)("div",{className:"pt-4",children:(0,a.jsxs)("button",{onClick:f,className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-primary text-white rounded-lg hover:bg-primary-dark",children:[(0,a.jsx)(x.A,{className:"w-5 h-5"}),"Complete Setup"]})})]})]})}}],M=(0,r.createContext)(null);function P({children:e}){let[t,s]=(0,r.useState)(C[0].id),[i,n]=(0,r.useState)([]);return(0,a.jsx)(M.Provider,{value:{currentStep:t,completedSteps:i,completeStep:e=>{n(t=>t.includes(e)?t:[...t,e]);let t=C.findIndex(t=>t.id===e);t<C.length-1&&s(C[t+1].id)},goToStep:e=>{s(e)}},children:e})}var _=s(9334);let E=(0,l.A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),I=(0,l.A)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);function z({steps:e,currentStep:t,completedSteps:s,onStepClick:r}){return(0,a.jsx)("div",{className:"grid gap-4",children:e.map((i,n)=>{let l=i.icon,o=i.id===t,c=s.includes(i.id),d=c||s.includes(e[n-1]?.id);return(0,a.jsxs)("button",{onClick:()=>d&&r(i.id),disabled:!d,className:`relative flex items-start gap-4 p-4 rounded-lg transition-all text-left ${o?"bg-blue-50 ring-1 ring-blue-100 scale-102":c?"bg-green-50":"bg-gray-50"} ${d?"cursor-pointer hover:ring-1 hover:ring-gray-200":"cursor-not-allowed opacity-50"}`,children:[n<e.length-1&&(0,a.jsx)("div",{className:`absolute left-7 top-12 bottom-0 w-0.5 ${c?"bg-green-200":"bg-gray-200"}`}),(0,a.jsx)("div",{className:`relative z-10 p-2 rounded-full transition-colors ${o?"bg-blue-100 text-blue-600 ring-4 ring-blue-50":c?"bg-green-100 text-green-600":"bg-gray-100 text-gray-400"}`,children:(0,a.jsx)(l,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("h3",{className:`font-medium ${o?"text-blue-900":c?"text-green-900":"text-gray-900"}`,children:i.title}),!c&&!o&&(0,a.jsx)("span",{className:"text-xs px-2 py-0.5 bg-gray-100 text-gray-600 rounded-full",children:d?"Ready":"Locked"})]}),(0,a.jsx)("p",{className:`text-sm mt-1 ${o?"text-blue-600":c?"text-green-600":"text-gray-500"}`,children:i.description})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[c&&(0,a.jsx)("span",{className:"text-sm font-medium text-green-600",children:"Completed"}),o&&(0,a.jsx)("span",{className:"text-sm font-medium text-blue-600 animate-pulse",children:"In Progress"})]})]},i.id)})})}function q(){let e=(0,_.useRouter)(),{currentStep:t,completedSteps:s,completeStep:i,goToStep:n}=function(){let e=(0,r.useContext)(M);if(!e)throw Error("useSetup must be used within a SetupProvider");return e}(),l=C.find(e=>e.id===t)?.component,o=C.findIndex(e=>e.id===t),c=0===o,d=o===C.length-1,m=async t=>{if(i(t),t===C[C.length-1].id)try{let t=(0,h.U)();if(!t)throw Error("Supabase client not initialized");await t.from("user_settings").upsert({setup_completed:!0,setup_completed_at:new Date().toISOString()}),e.push("/?setup=complete")}catch(e){console.error("Failed to mark setup as complete:",e)}};return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto pt-12 px-4 pb-12",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-8",children:[(0,a.jsx)(N.A,{className:"w-10 h-10 text-primary"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"System Setup"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Complete these steps to set up your Smart Email Manager"})]})]}),(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsx)(z,{steps:C,currentStep:t,completedSteps:s,onStepClick:n})}),(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-8",children:l&&(0,a.jsx)(l,{onComplete:()=>m(t)})}),(0,a.jsxs)("div",{className:"flex justify-between mt-6",children:[(0,a.jsxs)("button",{onClick:()=>{c||n(C[o-1].id)},disabled:c,className:"flex items-center gap-2 px-4 py-2 text-gray-600 hover:text-gray-900 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,a.jsx)(E,{className:"w-4 h-4"}),"Previous"]}),(0,a.jsxs)("button",{onClick:()=>{d||n(C[o+1].id)},disabled:d||!s.includes(t),className:"flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-md hover:bg-primary-dark disabled:opacity-50 disabled:cursor-not-allowed",children:["Next",(0,a.jsx)(I,{className:"w-4 h-4"})]})]})]})})}function U(){return(0,a.jsx)(P,{children:(0,a.jsx)(q,{})})}},864:(e,t,s)=>{"use strict";s.d(t,{Q:()=>a,u:()=>r});let a={id:"1",subject:"Urgent: Q4 Budget Review Meeting",messages:[{id:"msg1",from:"sarah.finance@company.com",to:["team@company.com"],subject:"Urgent: Q4 Budget Review Meeting",body:`Hi Team,

I hope this email finds you well. We need to schedule an urgent meeting to review the Q4 budget projections. Our preliminary analysis shows some concerning trends that require immediate attention.

Key points for discussion:
- Revenue forecast adjustments
- Unexpected cost increases in Q3
- Impact on year-end targets
- Mitigation strategies

Please let me know your availability for tomorrow or Wednesday.

Best regards,
Sarah`,timestamp:new Date("2024-01-04T09:00:00"),status:"sent",attachments:[{id:"1",name:"Q4_Budget_Review.xlsx",size:2048576},{id:"2",name:"Financial_Summary.pdf",size:1048576}]},{id:"msg2",from:"john.manager@company.com",to:["sarah.finance@company.com","team@company.com"],subject:"Re: Urgent: Q4 Budget Review Meeting",body:`Thanks for flagging this, Sarah.

I can make myself available tomorrow at 2 PM EST. The cost increases are indeed concerning, and I've already started gathering some data on the main contributors.

I'll prepare a brief overview of the operational impacts for the meeting.

Best,
John`,timestamp:new Date("2024-01-04T09:45:00"),status:"sent"}]},r=[{id:"1",subject:"Urgent: Q4 Budget Review Meeting",from:"sarah.finance@company.com",to:["user@example.com"],body:a.messages[0].body,attachments:a.messages[0].attachments,timestamp:new Date,status:"ai_pending",aiMetadata:{sentiment:"negative",priority:"high",category:"finance"},aiSuggestion:{id:"sugg1",body:`Dear Sarah,

Thank you for raising these concerns about the Q4 budget. I understand the urgency and can make myself available tomorrow at 2 PM for the review meeting.

I've already reviewed the preliminary numbers and agree that we need to address these trends promptly. I'll prepare some initial mitigation proposals for discussion.

Would tomorrow at 2 PM work for you?

Best regards,
[Your name]`,confidence:.92,reasoning:"Response prioritizes urgency while maintaining professional tone"}}]},4611:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n,metadata:()=>i});var a=s(2740),r=s(3274);let i={title:"Setup | Smart Email Manager",description:"Set up your Smart Email Manager system"};function n(){return(0,a.jsx)(r.SetupGuide,{})}},3274:(e,t,s)=>{"use strict";s.d(t,{SetupGuide:()=>a});let a=(0,s(6760).registerClientReference)(function(){throw Error("Attempted to call SetupGuide() from the server but SetupGuide is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/darrengalvin/Downloads/email connector/src/components/setup/SetupGuide.tsx","SetupGuide")}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[638,212,150],()=>s(2953));module.exports=a})();
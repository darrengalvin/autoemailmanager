exports.id=150,exports.ids=[150],exports.modules={4353:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,3219,23)),Promise.resolve().then(t.t.bind(t,4863,23)),Promise.resolve().then(t.t.bind(t,5155,23)),Promise.resolve().then(t.t.bind(t,802,23)),Promise.resolve().then(t.t.bind(t,9350,23)),Promise.resolve().then(t.t.bind(t,8530,23)),Promise.resolve().then(t.t.bind(t,8921,23))},9505:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,6959,23)),Promise.resolve().then(t.t.bind(t,3875,23)),Promise.resolve().then(t.t.bind(t,8903,23)),Promise.resolve().then(t.t.bind(t,7174,23)),Promise.resolve().then(t.t.bind(t,4178,23)),Promise.resolve().then(t.t.bind(t,7190,23)),Promise.resolve().then(t.t.bind(t,1365,23))},1637:(e,r,t)=>{Promise.resolve().then(t.bind(t,3104)),Promise.resolve().then(t.bind(t,7400)),Promise.resolve().then(t.bind(t,7812))},4789:(e,r,t)=>{Promise.resolve().then(t.bind(t,5792)),Promise.resolve().then(t.bind(t,6682)),Promise.resolve().then(t.bind(t,6217))},5792:(e,r,t)=>{"use strict";t.d(r,{Providers:()=>l});var s=t(5512),n=t(8009),a=t(4432);class o extends n.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,r){console.error("ErrorBoundary caught an error:",e,r)}render(){return this.state.hasError?(0,s.jsxs)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-red-600 mb-2",children:[(0,s.jsx)(a.A,{className:"w-5 h-5"}),(0,s.jsx)("h2",{className:"font-semibold",children:"Something went wrong"})]}),(0,s.jsx)("p",{className:"text-red-700",children:this.state.error?.message})]}):this.props.children}constructor(...e){super(...e),this.state={hasError:!1}}}var i=t(6613);function l({children:e}){return(0,s.jsx)(o,{children:(0,s.jsx)(i.Jo,{children:e})})}},6217:(e,r,t)=>{"use strict";t.d(r,{Sidebar:()=>f});var s=t(5512),n=t(9334),a=t(8866),o=t(9905),i=t(2706),l=t(1075),d=t(4643),c=t(4520);let m=[{path:"/",icon:a.A,label:"Inbox"},{path:"/drafts",icon:l.A,label:"Drafts"},{path:"/pending",icon:d.A,label:"Pending"},{path:"/settings",icon:c.A,label:"Settings"}];var u=t(8531),h=t.n(u);function g({path:e,icon:r,label:t,isActive:n,isCollapsed:a}){return(0,s.jsxs)(h(),{href:e,onClick:()=>{console.group("Navigation Item Clicked"),console.log("Path:",e),console.log("Label:",t),console.log("Is Active:",n),console.log("Current Time:",new Date().toISOString()),console.groupEnd()},className:`flex items-center gap-3 p-3 rounded-md hover:bg-primary-light mb-1 transition-all duration-200 group ${n?"bg-primary-light":""} ${a?"justify-center w-12":""}`,title:a?t:void 0,children:[(0,s.jsx)("div",{className:`flex-shrink-0 ${a?"w-6 h-6 flex items-center justify-center":""}`,children:(0,s.jsx)(r,{className:`w-5 h-5 ${a?"group-hover:scale-110 transition-transform":""}`})}),!a&&(0,s.jsx)("span",{className:"text-sm",children:t})]})}var p=t(8009);function f(){let e=(0,n.usePathname)(),[r,t]=(0,p.useState)(!0);return(0,s.jsxs)("aside",{className:`bg-primary text-white h-full transition-all duration-300 flex flex-col ${r?"w-16":"w-64"}`,children:[(0,s.jsxs)("div",{className:`flex items-center gap-2 p-4 ${r?"justify-center":""}`,children:[(0,s.jsx)(a.A,{className:"w-8 h-8 flex-shrink-0"}),!r&&(0,s.jsx)("h1",{className:"text-xl font-bold",children:"Email Manager"})]}),(0,s.jsx)("nav",{className:"flex-1 overflow-y-auto px-2 py-4",children:m.map(t=>(0,s.jsx)(g,{...t,isActive:e===t.path,isCollapsed:r},t.path))}),(0,s.jsx)("button",{onClick:()=>t(!r),className:"p-4 hover:bg-primary-light flex items-center justify-center text-white/80 hover:text-white transition-colors border-t border-white/10",children:r?(0,s.jsx)(o.A,{className:"w-5 h-5"}):(0,s.jsxs)("div",{className:"flex items-center gap-2 w-full",children:[(0,s.jsx)(i.A,{className:"w-5 h-5"}),(0,s.jsx)("span",{className:"text-sm",children:"Collapse"})]})})]})}},6682:(e,r,t)=>{"use strict";t.d(r,{AuthStatusHeader:()=>g});var s=t(5512),n=t(4432),a=t(722),o=t(8443),i=t(8531),l=t.n(i);t(8009);var d=t(9334),c=t(2676),m=t(3279),u=t(282),h=t(6613);function g(){let{user:e}=function(){(0,d.useRouter)();let{user:e,setUser:r,isLoading:t,setIsLoading:s,error:n,setError:a}=(0,m.n)(),o=(0,c.U)();return{user:e,isLoading:t,error:n,signIn:async(e,r)=>{if(!o)throw Error("Supabase client not initialized");try{if(s(!0),a(null),"microsoft"===e){let{error:e}=await o.auth.signInWithOAuth({provider:"azure",options:{scopes:"email offline_access Mail.Read Mail.Send User.Read",queryParams:{prompt:"consent",domain_hint:"organizations"},redirectTo:`${window.location.origin}/auth/callback`}});if(e)throw e}else if(r?.email&&r?.password){let{error:e}=await o.auth.signInWithPassword({email:r.email,password:r.password});if(e)throw e}}catch(e){throw u.v.error("Sign in failed:",e),a(e instanceof Error?e.message:"Authentication failed"),e}finally{s(!1)}},signOut:async()=>{if(!o)throw Error("Supabase client not initialized");try{s(!0);let{error:e}=await o.auth.signOut();if(e)throw e}catch(e){throw u.v.error("Sign out failed:",e),a(e instanceof Error?e.message:"Sign out failed"),e}finally{s(!1)}}}}(),{settings:r}=(0,h.x)(),t=r.branding?.logoUrl;return(0,s.jsx)("div",{className:"bg-white border-b",children:(0,s.jsx)("div",{className:"container mx-auto px-4 py-3",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[t?(0,s.jsx)("img",{src:t,alt:"Logo",className:"h-8 w-auto"}):(0,s.jsx)("div",{className:"w-8 h-8 bg-gray-100 rounded flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-primary font-semibold",children:"SE"})}),(0,s.jsx)("span",{className:"font-semibold text-gray-900",children:"Smart Email Manager"})]}),!e&&(0,s.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-amber-50 text-amber-700 rounded-md text-sm",children:[(0,s.jsx)(n.A,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:"Demo Mode"})]})]}),(0,s.jsx)("div",{className:"flex items-center gap-4",children:e?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"text-sm text-gray-600",children:["Signed in as ",(0,s.jsx)("span",{className:"font-medium text-gray-900",children:e.email})]}),(0,s.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-md transition-colors text-sm",children:[(0,s.jsx)(a.A,{className:"w-4 h-4"}),"Sign Out"]})]}):(0,s.jsxs)(l(),{href:"/setup",className:"flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-md hover:bg-primary-dark transition-colors text-sm",children:[(0,s.jsx)(o.A,{className:"w-4 h-4"}),"Connect Account"]})})]})})})}},3279:(e,r,t)=>{"use strict";t.d(r,{n:()=>a});var s=t(159),n=t(2676);let a=(0,s.vt)(e=>({user:null,isLoading:!0,error:null,setUser:r=>e({user:r}),setIsLoading:r=>e({isLoading:r}),setError:r=>e({error:r}),signIn:async(r,t)=>{try{e({isLoading:!0,error:null});let s=(0,n.U)();if(!s)throw Error("Supabase client not initialized");let{error:a}=await s.auth.signInWithPassword({email:r,password:t});if(a)throw a}catch(r){throw e({error:r instanceof Error?r.message:"Failed to sign in"}),r}finally{e({isLoading:!1})}},signUp:async(r,t)=>{try{e({isLoading:!0,error:null});let s=(0,n.U)();if(!s)throw Error("Supabase client not initialized");let{error:a}=await s.auth.signUp({email:r,password:t,options:{emailRedirectTo:`${window.location.origin}/auth/callback`}});if(a)throw a}catch(r){throw e({error:r instanceof Error?r.message:"Failed to sign up"}),r}finally{e({isLoading:!1})}},signOut:async()=>{try{e({isLoading:!0,error:null});let r=(0,n.U)();if(!r)throw Error("Supabase client not initialized");let{error:t}=await r.auth.signOut();if(t)throw t;e({user:null})}catch(r){throw e({error:r instanceof Error?r.message:"Failed to sign out"}),r}finally{e({isLoading:!1})}},clearError:()=>e({error:null})})),o=(0,n.U)();o&&o.auth.onAuthStateChange((e,r)=>{a.setState({user:r?.user??null,isLoading:!1})})},6613:(e,r,t)=>{"use strict";t.d(r,{Jo:()=>l,x:()=>o});var s=t(5512),n=t(159),a=t(8009);let o=(0,n.vt)(e=>({emails:[],drafts:[],settings:{tone:"formal",language:"en",signature:"",replyDelay:0,excludedEmails:[],branding:{logoUrl:null,primaryColor:"#014380",secondaryColor:"#014584",companyName:"",emailSignature:""},aiRules:{enabled:!1,allowedSenders:[],excludedSenders:[],keywords:[],maxTokensPerEmail:2e3,monthlyTokenBudget:1e5,processRules:{processAll:!0,processFromList:!1,processWithKeywords:!1}},tokenUsage:{currentMonthTokens:0,monthlyLimit:1e5,costPerThousandTokens:.02},models:{anthropic:{enabled:!0,apiKey:"",maxTokens:2e3,temperature:.7,prompts:{systemPrompt:"",additionalInstructions:""}}},defaultModel:"anthropic"},setEmails:r=>e({emails:r}),addDraft:r=>e(e=>({drafts:[...e.drafts,r]})),updateDraft:(r,t)=>e(e=>({drafts:e.drafts.map(e=>e.id===r?t:e)})),approveDraft:r=>e(e=>({drafts:e.drafts.filter(e=>e.id!==r),emails:[...e.emails,e.drafts.find(e=>e.id===r)]})),deleteDraft:r=>e(e=>({drafts:e.drafts.filter(e=>e.id!==r)})),updateSettings:r=>e({settings:r})})),i=(0,a.createContext)(null);function l({children:e}){let r=o();return(0,s.jsx)(i.Provider,{value:r,children:e})}},282:(e,r,t)=>{"use strict";t.d(r,{v:()=>n});class s{logToConsole(e){let r=`[${e.timestamp}] [${e.level.toUpperCase()}]`;switch(e.level){case"debug":e.data?console.log(r,e.message,e.data):console.log(r,e.message);break;case"info":e.data?console.info(r,e.message,e.data):console.info(r,e.message);break;case"warn":e.data?console.warn(r,e.message,e.data):console.warn(r,e.message);break;case"error":e.data?console.error(r,e.message,e.data):console.error(r,e.message)}}createLogEntry(e,r,t){return{level:e,message:r,data:t,timestamp:new Date().toISOString()}}debug(e,r){this.logToConsole(this.createLogEntry("debug",e,r))}info(e,r){this.logToConsole(this.createLogEntry("info",e,r))}warn(e,r){this.logToConsole(this.createLogEntry("warn",e,r))}error(e,r){this.logToConsole(this.createLogEntry("error",e,r))}}let n=new s},2676:(e,r,t)=>{"use strict";t.d(r,{U:()=>o});var s=t(5952),n=t(282);let a=null;function o(){let e=process.env.NEXT_PUBLIC_SUPABASE_URL,r=process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;return e&&r?(a||(a=(0,s.kT)(e,r)),a):(n.v.warn("Supabase credentials not found, using mock client"),{auth:{getSession:async()=>({data:{session:null},error:null}),getUser:async()=>({data:{user:null},error:null}),signInWithOAuth:async()=>({data:null,error:null}),signInWithPassword:async()=>({data:null,error:null}),signUp:async()=>({data:null,error:null}),signOut:async()=>({error:null}),onAuthStateChange:()=>({data:{subscription:{unsubscribe:()=>{}}}})},storage:{createBucket:async()=>({data:null,error:null}),from:()=>({upload:async()=>({data:{path:""},error:null}),getPublicUrl:()=>({data:{publicUrl:""}}),remove:async()=>({error:null})})},from:e=>({select:e=>({single:async()=>({data:null,error:null}),eq:()=>({data:[],error:null})}),insert:async r=>(n.v.info(`Mock inserting into ${e}:`,r),{data:Array.isArray(r)?r:[r],error:null}),upsert:async e=>({data:e,error:null})})})}},2126:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>d,metadata:()=>l});var s=t(2740);t(5692);var n=t(3104),a=t(7812);function o(){return(0,s.jsx)(a.Sidebar,{})}var i=t(7400);let l={title:"Smart Email Manager",description:"AI-powered email management system"};function d({children:e}){return(0,s.jsx)("html",{lang:"en",className:"h-full",children:(0,s.jsxs)("body",{className:"h-full",children:[(0,s.jsx)(n.Providers,{children:(0,s.jsxs)("div",{className:"flex flex-col h-full",children:[(0,s.jsx)(i.AuthStatusHeader,{}),(0,s.jsxs)("div",{className:"flex flex-1 bg-gray-100",children:[(0,s.jsx)(o,{}),(0,s.jsx)("main",{className:"flex-1 overflow-auto",children:e})]})]})}),(0,s.jsx)("script",{dangerouslySetInnerHTML:{__html:`
            window.addEventListener('error', function(e) {
              if (e.message === 'ResizeObserver loop completed with undelivered notifications.') {
                e.stopImmediatePropagation();
              }
            });
          `}})]})})}},3104:(e,r,t)=>{"use strict";t.d(r,{Providers:()=>s});let s=(0,t(6760).registerClientReference)(function(){throw Error("Attempted to call Providers() from the server but Providers is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/darrengalvin/Downloads/email connector/src/app/providers.tsx","Providers")},7812:(e,r,t)=>{"use strict";t.d(r,{Sidebar:()=>s});let s=(0,t(6760).registerClientReference)(function(){throw Error("Attempted to call Sidebar() from the server but Sidebar is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/darrengalvin/Downloads/email connector/src/components/Sidebar/Sidebar.tsx","Sidebar")},7400:(e,r,t)=>{"use strict";t.d(r,{AuthStatusHeader:()=>s});let s=(0,t(6760).registerClientReference)(function(){throw Error("Attempted to call AuthStatusHeader() from the server but AuthStatusHeader is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/darrengalvin/Downloads/email connector/src/components/common/AuthStatusHeader.tsx","AuthStatusHeader")},5692:()=>{}};